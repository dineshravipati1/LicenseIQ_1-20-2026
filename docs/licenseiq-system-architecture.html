<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LicenseIQ System Architecture - AI-Native Calculation Platform</title>
    <style>
        :root {
            --primary: #0f172a;
            --primary-light: #1e293b;
            --accent: #10b981;
            --accent-secondary: #3b82f6;
            --accent-tertiary: #8b5cf6;
            --accent-gradient: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%);
            --dark-gradient: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #312e81 100%);
            --text: #334155;
            --text-light: #64748b;
            --bg: #ffffff;
            --section-bg: #f8fafc;
            --border: #e2e8f0;
            --success: #10b981;
            --warning: #f59e0b;
            --info: #3b82f6;
            --danger: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
        }

        /* Header */
        .hero {
            background: var(--dark-gradient);
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2310b981' fill-opacity='0.08'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.7;
            margin-bottom: 15px;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 15px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero .subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            margin-bottom: 25px;
        }

        .hero .version {
            display: inline-block;
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: var(--primary);
            overflow-x: auto;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .nav-tab {
            flex: 1;
            min-width: 140px;
            padding: 18px 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.05);
            color: white;
        }

        .nav-tab.active {
            color: white;
            border-bottom-color: var(--accent);
            background: rgba(16, 185, 129, 0.1);
        }

        .nav-tab-icon {
            display: block;
            font-size: 1.2rem;
            margin-bottom: 4px;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 50px 40px;
            max-width: 1400px;
            margin: 0 auto;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Titles */
        h2 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--accent-gradient);
            border-radius: 2px;
        }

        h3 {
            font-size: 1.35rem;
            color: var(--primary);
            margin: 35px 0 18px;
        }

        h4 {
            font-size: 1.1rem;
            color: var(--accent-secondary);
            margin: 20px 0 12px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 35px 0;
        }

        .stat-card {
            background: var(--dark-gradient);
            color: white;
            padding: 30px 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.85;
        }

        /* Feature Cards */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-card {
            background: white;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-gradient);
        }

        .feature-card:hover {
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .feature-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 18px;
        }

        .feature-card h4 {
            margin: 0 0 10px;
            color: var(--primary);
        }

        .feature-card p {
            color: var(--text-light);
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
        }

        /* Architecture Diagram */
        .diagram-container {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 40px;
            margin: 30px 0;
            overflow-x: auto;
        }

        .diagram-title {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 25px;
        }

        .arch-diagram {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            white-space: pre;
            color: var(--primary);
            overflow-x: auto;
        }

        /* Layer Boxes */
        .layer-section {
            margin: 40px 0;
        }

        .layer-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .layer-badge {
            padding: 8px 18px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
        }

        .layer-badge.frontend { background: var(--accent); }
        .layer-badge.backend { background: var(--accent-secondary); }
        .layer-badge.ai { background: var(--accent-tertiary); }
        .layer-badge.data { background: var(--warning); }
        .layer-badge.infra { background: var(--danger); }

        /* Technology Grid */
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .tech-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 18px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .tech-item:hover {
            border-color: var(--accent);
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.1);
        }

        .tech-item-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .tech-item-name {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .tech-item-desc {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .data-table th, .data-table td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover td {
            background: #f8fafc;
        }

        .data-table code {
            background: #f1f5f9;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: var(--accent-secondary);
        }

        /* Status Badges */
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status.done { background: #d1fae5; color: #065f46; }
        .status.progress { background: #fef3c7; color: #92400e; }
        .status.planned { background: #dbeafe; color: #1e40af; }

        /* Flow Diagram */
        .flow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 16px;
        }

        .flow-node {
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px 25px;
            text-align: center;
            min-width: 140px;
            transition: all 0.3s ease;
        }

        .flow-node:hover {
            border-color: var(--accent);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.15);
        }

        .flow-node-icon {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .flow-node-label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary);
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--accent);
        }

        /* Accordion */
        .accordion {
            margin: 25px 0;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 12px;
            overflow: hidden;
        }

        .accordion-header {
            padding: 18px 25px;
            background: white;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--primary);
            transition: background 0.3s ease;
        }

        .accordion-header:hover {
            background: #f8fafc;
        }

        .accordion-header.active {
            background: var(--section-bg);
            border-bottom: 1px solid var(--border);
        }

        .accordion-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            display: none;
            padding: 25px;
            background: white;
        }

        .accordion-content.active {
            display: block;
        }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
            border-left: 4px solid var(--accent-secondary);
            padding: 20px 25px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-box h5 {
            color: var(--accent-secondary);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        /* Lists */
        ul {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
            color: var(--text);
        }

        /* Footer */
        .footer {
            background: var(--primary);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .footer h3 {
            color: white;
            margin-bottom: 15px;
        }

        .footer p {
            opacity: 0.7;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .nav-tab { min-width: 100px; padding: 12px 10px; }
            .nav-tab-icon { display: none; }
            .tab-content { padding: 30px 20px; }
            .feature-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media print {
            .nav-tabs { display: none; }
            .tab-content { display: block !important; page-break-before: always; }
        }
    </style>
</head>
<body>

<div class="hero">
    <div class="hero-content">
        <div class="logo">Enterprise SaaS Platform</div>
        <h1>LicenseIQ System Architecture</h1>
        <p class="subtitle">AI-Native Universal Calculation Platform for Intelligent Contract Management</p>
        <span class="version">Version 2.0 | December 2024</span>
    </div>
</div>

<nav class="nav-tabs">
    <div class="nav-tab active" data-tab="overview">
        <span class="nav-tab-icon">ğŸ“Š</span>
        Overview
    </div>
    <div class="nav-tab" data-tab="frontend">
        <span class="nav-tab-icon">ğŸ¨</span>
        Frontend
    </div>
    <div class="nav-tab" data-tab="backend">
        <span class="nav-tab-icon">âš™ï¸</span>
        Backend
    </div>
    <div class="nav-tab" data-tab="ai">
        <span class="nav-tab-icon">ğŸ¤–</span>
        AI/ML
    </div>
    <div class="nav-tab" data-tab="database">
        <span class="nav-tab-icon">ğŸ—„ï¸</span>
        Database
    </div>
    <div class="nav-tab" data-tab="integration">
        <span class="nav-tab-icon">ğŸ”—</span>
        Integration
    </div>
    <div class="nav-tab" data-tab="security">
        <span class="nav-tab-icon">ğŸ”’</span>
        Security
    </div>
    <div class="nav-tab" data-tab="dataflow">
        <span class="nav-tab-icon">ğŸ”„</span>
        Data Flow
    </div>
</nav>

<!-- OVERVIEW TAB -->
<div id="overview" class="tab-content active">
    <h2>Platform Overview</h2>
    <p>LicenseIQ is an AI-native SaaS platform for intelligent contract management, automated payment calculations, and universal ERP integration. Built with a modern microservices-inspired architecture, it combines cutting-edge AI capabilities with enterprise-grade security and scalability.</p>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">20+</div>
            <div class="stat-label">Core Features</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">5</div>
            <div class="stat-label">AI Models</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">50+</div>
            <div class="stat-label">Database Tables</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">3-Level</div>
            <div class="stat-label">Multi-Tenant</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">5-Tier</div>
            <div class="stat-label">RBAC System</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">12</div>
            <div class="stat-label">Color Themes</div>
        </div>
    </div>

    <h3>High-Level Architecture</h3>
    <div class="diagram-container">
        <div class="diagram-title">LicenseIQ Platform Architecture</div>
        <div class="arch-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    CLIENT LAYER                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                          React + TypeScript + Vite                                   â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚  Dashboard   â”‚ â”‚  Contracts   â”‚ â”‚ Calculations â”‚ â”‚ ERP Hub      â”‚ â”‚ liQ AI     â”‚â”‚â”‚
â”‚  â”‚  â”‚  Analytics   â”‚ â”‚  Management  â”‚ â”‚ Engine       â”‚ â”‚ Integration  â”‚ â”‚ Assistant  â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚                          TailwindCSS + shadcn/ui + Recharts                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚ HTTPS / REST API
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    API LAYER                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        Express.js + TypeScript + Node.js                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚â”‚
â”‚  â”‚  â”‚ Auth Routes   â”‚ â”‚Contract Routesâ”‚ â”‚ ERP Routes    â”‚ â”‚ AI Routes     â”‚            â”‚â”‚
â”‚  â”‚  â”‚ Sessions      â”‚ â”‚ CRUD + Search â”‚ â”‚ Import/Export â”‚ â”‚ Analysis/Chat â”‚            â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚          â”‚                 â”‚                 â”‚                 â”‚                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”            â”‚â”‚
â”‚  â”‚  â”‚                        Service Layer                                 â”‚            â”‚â”‚
â”‚  â”‚  â”‚   ContractService â”‚ CalculationService â”‚ ERPService â”‚ AIService      â”‚            â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DATA LAYER         â”‚   â”‚      AI LAYER           â”‚   â”‚    EXTERNAL SYSTEMS     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   PostgreSQL      â”‚  â”‚   â”‚  â”‚   Groq API        â”‚  â”‚   â”‚  â”‚   Oracle Fusion   â”‚  â”‚
â”‚  â”‚   + pgvector      â”‚  â”‚   â”‚  â”‚   LLaMA 3.3 70B   â”‚  â”‚   â”‚  â”‚   SAP S/4HANA     â”‚  â”‚
â”‚  â”‚   + Drizzle ORM   â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚   NetSuite        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚   Dynamics 365    â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚   HuggingFace     â”‚  â”‚   â”‚  â”‚   Any REST API    â”‚  â”‚
â”‚  â”‚   Object Storage  â”‚  â”‚   â”‚  â”‚   Embeddings      â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚   (S3/R2)         â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚   OpenAI          â”‚  â”‚   â”‚                         â”‚
â”‚  â”‚   Redis Cache     â”‚  â”‚   â”‚  â”‚   (Fallback)      â”‚  â”‚   â”‚                         â”‚
â”‚  â”‚   (Planned)       â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                         â”‚   â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>
    </div>

    <h3>Core Feature Modules</h3>
    <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ“„</div>
            <h4>AI Contract Analysis</h4>
            <p>Automated extraction of contract terms, parties, dates, territories, and payment rules using LLaMA 3.3 70B model with zero-shot learning.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ§®</div>
            <h4>Dynamic Rule Engine</h4>
            <p>FormulaNode JSON expression trees for complex calculations: tiered rates, minimums, maximums, multi-currency, territorial splits.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ’¬</div>
            <h4>liQ AI Assistant</h4>
            <p>RAG-powered document Q&A with source citations. Omnipresent floating button for instant contract inquiries.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ”—</div>
            <h4>Universal ERP Integration</h4>
            <p>AI-powered field mapping supporting any ERP system. OAuth2, API Key, and Basic Auth with version control and approval workflows.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“Š</div>
            <h4>Payment Calculator</h4>
            <p>Centralized calculation dashboard with run history, professional PDF invoice generation, and audit trail.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ¢</div>
            <h4>Multi-Tenant Architecture</h4>
            <p>3-level hierarchy (Company â†’ Business Unit â†’ Location) with comprehensive data isolation and RBAC.</p>
        </div>
    </div>
</div>

<!-- FRONTEND TAB -->
<div id="frontend" class="tab-content">
    <h2>Frontend Architecture</h2>
    <p>Modern React application built with TypeScript, Vite, and a component-driven architecture using shadcn/ui and TailwindCSS.</p>

    <div class="layer-section">
        <div class="layer-header">
            <span class="layer-badge frontend">Frontend Layer</span>
            <span>React + TypeScript + Vite</span>
        </div>

        <h3>Technology Stack</h3>
        <div class="tech-grid">
            <div class="tech-item">
                <div class="tech-item-icon">âš›ï¸</div>
                <div class="tech-item-name">React 18</div>
                <div class="tech-item-desc">UI Library</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ“˜</div>
                <div class="tech-item-name">TypeScript</div>
                <div class="tech-item-desc">Type Safety</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">âš¡</div>
                <div class="tech-item-name">Vite</div>
                <div class="tech-item-desc">Build Tool</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ¨</div>
                <div class="tech-item-name">TailwindCSS</div>
                <div class="tech-item-desc">Styling</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ§©</div>
                <div class="tech-item-name">shadcn/ui</div>
                <div class="tech-item-desc">Components</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ”€</div>
                <div class="tech-item-name">Wouter</div>
                <div class="tech-item-desc">Routing</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ”„</div>
                <div class="tech-item-name">TanStack Query</div>
                <div class="tech-item-desc">Data Fetching</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ“</div>
                <div class="tech-item-name">React Hook Form</div>
                <div class="tech-item-desc">Form Handling</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">âœ…</div>
                <div class="tech-item-name">Zod</div>
                <div class="tech-item-desc">Validation</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ“ˆ</div>
                <div class="tech-item-name">Recharts</div>
                <div class="tech-item-desc">Charts</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ­</div>
                <div class="tech-item-name">Framer Motion</div>
                <div class="tech-item-desc">Animations</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸŒ™</div>
                <div class="tech-item-name">next-themes</div>
                <div class="tech-item-desc">Dark Mode</div>
            </div>
        </div>
    </div>

    <h3>Application Structure</h3>
    <table class="data-table">
        <thead>
            <tr>
                <th>Directory</th>
                <th>Purpose</th>
                <th>Key Files</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>client/src/pages/</code></td>
                <td>Page components (route views)</td>
                <td>dashboard.tsx, contracts.tsx, erp-integration.tsx</td>
            </tr>
            <tr>
                <td><code>client/src/components/</code></td>
                <td>Reusable UI components</td>
                <td>sidebar.tsx, contract-card.tsx, liq-ai-chat.tsx</td>
            </tr>
            <tr>
                <td><code>client/src/components/ui/</code></td>
                <td>shadcn/ui primitives</td>
                <td>button.tsx, dialog.tsx, form.tsx, table.tsx</td>
            </tr>
            <tr>
                <td><code>client/src/hooks/</code></td>
                <td>Custom React hooks</td>
                <td>use-toast.ts, use-theme.ts, use-location-context.ts</td>
            </tr>
            <tr>
                <td><code>client/src/lib/</code></td>
                <td>Utilities and configuration</td>
                <td>queryClient.ts, utils.ts, apiRequest.ts</td>
            </tr>
            <tr>
                <td><code>client/src/contexts/</code></td>
                <td>React context providers</td>
                <td>LocationContext.tsx, ThemeContext.tsx</td>
            </tr>
        </tbody>
    </table>

    <h3>UI Features</h3>
    <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ¨</div>
            <h4>12 Color Themes</h4>
            <p>Multi-theme system with user-selectable color schemes, persisted to user preferences in the database.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸŒ™</div>
            <h4>Dark Mode</h4>
            <p>Full dark mode support with CSS variables and localStorage persistence.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“±</div>
            <h4>Responsive Design</h4>
            <p>Mobile-first responsive layout with collapsible sidebar and touch-friendly interactions.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ¯</div>
            <h4>Drag & Drop Navigation</h4>
            <p>User-customizable menu ordering with drag-and-drop, saved per user to database.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ’¬</div>
            <h4>Omnipresent AI</h4>
            <p>Floating liQ AI button available on every page for instant contract Q&A.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“Š</div>
            <h4>Interactive Charts</h4>
            <p>Recharts-powered analytics with animated gradients and real-time data visualization.</p>
        </div>
    </div>
</div>

<!-- BACKEND TAB -->
<div id="backend" class="tab-content">
    <h2>Backend Architecture</h2>
    <p>Express.js RESTful API with a layered service architecture, TypeScript for type safety, and Drizzle ORM for database operations.</p>

    <div class="layer-section">
        <div class="layer-header">
            <span class="layer-badge backend">Backend Layer</span>
            <span>Express.js + TypeScript + Node.js</span>
        </div>

        <h3>Architecture Layers</h3>
        <div class="diagram-container">
            <div class="diagram-title">Backend Service Architecture</div>
            <div class="arch-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API Routes Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ /api/auth   â”‚ â”‚/api/contractsâ”‚ â”‚ /api/erp    â”‚ â”‚ /api/ai     â”‚   â”‚
â”‚  â”‚ login       â”‚ â”‚ CRUD         â”‚ â”‚ mappings    â”‚ â”‚ analyze     â”‚   â”‚
â”‚  â”‚ logout      â”‚ â”‚ search       â”‚ â”‚ import      â”‚ â”‚ chat        â”‚   â”‚
â”‚  â”‚ register    â”‚ â”‚ analysis     â”‚ â”‚ sync        â”‚ â”‚ embeddings  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚               â”‚               â”‚               â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                 â”‚                                    â”‚
â”‚                                 â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                     Middleware Layer                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚â”‚
â”‚  â”‚  â”‚   Auth    â”‚ â”‚   RBAC    â”‚ â”‚ Location  â”‚ â”‚ Validationâ”‚        â”‚â”‚
â”‚  â”‚  â”‚ isAuth()  â”‚ â”‚ hasRole() â”‚ â”‚ Context   â”‚ â”‚ Zod       â”‚        â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚                                    â”‚
â”‚                                 â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      Service Layer                               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚â”‚
â”‚  â”‚  â”‚ContractSvc   â”‚ â”‚CalculationSvcâ”‚ â”‚  ERPService  â”‚             â”‚â”‚
â”‚  â”‚  â”‚ - analyze    â”‚ â”‚ - calculate  â”‚ â”‚ - map fields â”‚             â”‚â”‚
â”‚  â”‚  â”‚ - extract    â”‚ â”‚ - run rules  â”‚ â”‚ - import     â”‚             â”‚â”‚
â”‚  â”‚  â”‚ - validate   â”‚ â”‚ - generate   â”‚ â”‚ - transform  â”‚             â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚â”‚
â”‚  â”‚  â”‚  AIService   â”‚ â”‚ ChatService  â”‚ â”‚ SearchServiceâ”‚             â”‚â”‚
â”‚  â”‚  â”‚ - groq API   â”‚ â”‚ - RAG query  â”‚ â”‚ - full-text  â”‚             â”‚â”‚
â”‚  â”‚  â”‚ - embeddings â”‚ â”‚ - citations  â”‚ â”‚ - vector     â”‚             â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚                                    â”‚
â”‚                                 â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      Storage Layer                               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚              IStorage Interface                           â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - getUser() | createContract() | updateRules()           â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - Multi-tenant filtering | RBAC enforcement              â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚                             â”‚                                    â”‚â”‚
â”‚  â”‚                             â–¼                                    â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚              Drizzle ORM + PostgreSQL                     â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>
        </div>
    </div>

    <h3>Key API Endpoints</h3>
    <table class="data-table">
        <thead>
            <tr>
                <th>Endpoint</th>
                <th>Method</th>
                <th>Description</th>
                <th>Auth</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>/api/contracts</code></td>
                <td>GET, POST</td>
                <td>List/Create contracts with multi-tenant filtering</td>
                <td>Required</td>
            </tr>
            <tr>
                <td><code>/api/contracts/:id/analyze</code></td>
                <td>POST</td>
                <td>Trigger AI analysis on contract</td>
                <td>Required</td>
            </tr>
            <tr>
                <td><code>/api/contracts/:id/chat</code></td>
                <td>POST</td>
                <td>RAG-powered Q&A for contract</td>
                <td>Required</td>
            </tr>
            <tr>
                <td><code>/api/erp/systems</code></td>
                <td>GET, POST</td>
                <td>Manage ERP system configurations</td>
                <td>Admin</td>
            </tr>
            <tr>
                <td><code>/api/erp/mappings</code></td>
                <td>GET, POST</td>
                <td>AI-powered field mapping</td>
                <td>Admin</td>
            </tr>
            <tr>
                <td><code>/api/erp/import</code></td>
                <td>POST</td>
                <td>Execute data import with filters</td>
                <td>Admin</td>
            </tr>
            <tr>
                <td><code>/api/calculations/run</code></td>
                <td>POST</td>
                <td>Execute payment calculations</td>
                <td>Required</td>
            </tr>
            <tr>
                <td><code>/api/royalty-rules</code></td>
                <td>GET, POST</td>
                <td>Manage calculation rules</td>
                <td>Required</td>
            </tr>
        </tbody>
    </table>

    <h3>Backend Technologies</h3>
    <div class="tech-grid">
        <div class="tech-item">
            <div class="tech-item-icon">ğŸš€</div>
            <div class="tech-item-name">Express.js</div>
            <div class="tech-item-desc">Web Framework</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ“˜</div>
            <div class="tech-item-name">TypeScript</div>
            <div class="tech-item-desc">Type Safety</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ”</div>
            <div class="tech-item-name">Passport.js</div>
            <div class="tech-item-desc">Authentication</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ“‚</div>
            <div class="tech-item-name">Multer</div>
            <div class="tech-item-desc">File Upload</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ“„</div>
            <div class="tech-item-name">PDFKit</div>
            <div class="tech-item-desc">PDF Generation</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">âœ…</div>
            <div class="tech-item-name">Zod</div>
            <div class="tech-item-desc">Validation</div>
        </div>
    </div>
</div>

<!-- AI/ML TAB -->
<div id="ai" class="tab-content">
    <h2>AI/ML Architecture</h2>
    <p>Multi-model AI ensemble leveraging Groq's LLaMA 3.3 70B for natural language processing and HuggingFace for vector embeddings.</p>

    <div class="layer-section">
        <div class="layer-header">
            <span class="layer-badge ai">AI Layer</span>
            <span>Groq + HuggingFace + OpenAI (Fallback)</span>
        </div>

        <h3>AI Capabilities</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">ğŸ“„</div>
                <h4>Contract Analysis</h4>
                <p>Zero-shot extraction of parties, dates, territories, products, payment terms, and risk indicators using LLaMA 3.3 70B.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“</div>
                <h4>Rule Generation</h4>
                <p>AI converts natural language payment terms into FormulaNode JSON expression trees for automated calculations.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ’¬</div>
                <h4>RAG-Powered Q&A</h4>
                <p>Retrieval-Augmented Generation using vector embeddings for accurate contract-specific answers with source citations.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”—</div>
                <h4>Field Mapping</h4>
                <p>AI-driven semantic matching between ERP fields and LicenseIQ schema with confidence scores.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âš ï¸</div>
                <h4>Risk Assessment</h4>
                <p>Automated identification of contract risks, compliance issues, and unusual terms.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ¯</div>
                <h4>Sales Matching</h4>
                <p>Semantic matching of sales data against contract embeddings with LLM validation for accuracy.</p>
            </div>
        </div>
    </div>

    <h3>AI Model Configuration</h3>
    <table class="data-table">
        <thead>
            <tr>
                <th>Capability</th>
                <th>Model</th>
                <th>Provider</th>
                <th>Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Contract Extraction</td>
                <td><code>llama-3.3-70b-versatile</code></td>
                <td>Groq</td>
                <td>Extract structured data from contracts</td>
            </tr>
            <tr>
                <td>Document Q&A</td>
                <td><code>llama-3.3-70b-versatile</code></td>
                <td>Groq</td>
                <td>Answer questions about contract content</td>
            </tr>
            <tr>
                <td>Field Mapping</td>
                <td><code>llama-3.3-70b-versatile</code></td>
                <td>Groq</td>
                <td>Map ERP fields to LicenseIQ schema</td>
            </tr>
            <tr>
                <td>Embeddings</td>
                <td><code>sentence-transformers/all-MiniLM-L6-v2</code></td>
                <td>HuggingFace</td>
                <td>Vector embeddings for semantic search</td>
            </tr>
            <tr>
                <td>Fallback LLM</td>
                <td><code>gpt-4o-mini</code></td>
                <td>OpenAI</td>
                <td>Backup when Groq is unavailable</td>
            </tr>
        </tbody>
    </table>

    <h3>AI Processing Pipeline</h3>
    <div class="flow-container">
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“„</div>
            <div class="flow-node-label">Document Upload</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“</div>
            <div class="flow-node-label">Text Extraction</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ§ </div>
            <div class="flow-node-label">LLM Analysis</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“Š</div>
            <div class="flow-node-label">Structured Output</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ”¢</div>
            <div class="flow-node-label">Embeddings</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ’¾</div>
            <div class="flow-node-label">Storage</div>
        </div>
    </div>

    <div class="info-box">
        <h5>AI Cost Optimization</h5>
        <ul>
            <li><strong>100% Free APIs:</strong> Groq offers free tier with generous limits</li>
            <li><strong>Response Caching:</strong> Cache identical queries to reduce API calls</li>
            <li><strong>Embedding Reuse:</strong> Store and reuse embeddings in pgvector</li>
            <li><strong>Fallback Chain:</strong> Automatic fallback to OpenAI if Groq fails</li>
        </ul>
    </div>
</div>

<!-- DATABASE TAB -->
<div id="database" class="tab-content">
    <h2>Database Architecture</h2>
    <p>PostgreSQL with Drizzle ORM, pgvector for AI embeddings, and comprehensive multi-tenant data isolation.</p>

    <div class="layer-section">
        <div class="layer-header">
            <span class="layer-badge data">Data Layer</span>
            <span>PostgreSQL + Drizzle ORM + pgvector</span>
        </div>

        <h3>Database Schema Groups</h3>
        <div class="accordion">
            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>ğŸ¢ Core Entities (Multi-Tenant)</span>
                    <span class="accordion-icon">â–¼</span>
                </div>
                <div class="accordion-content">
                    <table class="data-table">
                        <thead>
                            <tr><th>Table</th><th>Description</th><th>Key Fields</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>users</code></td><td>User accounts</td><td>id, email, passwordHash, role</td></tr>
                            <tr><td><code>companies</code></td><td>Top-level organizations</td><td>id, name, settings</td></tr>
                            <tr><td><code>business_units</code></td><td>Mid-level hierarchy</td><td>id, companyId, name</td></tr>
                            <tr><td><code>locations</code></td><td>Operational locations</td><td>id, businessUnitId, name</td></tr>
                            <tr><td><code>user_organization_roles</code></td><td>User-org role assignments</td><td>userId, orgType, orgId, role</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>ğŸ“„ Contract Management</span>
                    <span class="accordion-icon">â–¼</span>
                </div>
                <div class="accordion-content">
                    <table class="data-table">
                        <thead>
                            <tr><th>Table</th><th>Description</th><th>Key Fields</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>contracts</code></td><td>Agreement records</td><td>id, title, locationId, status, filePath</td></tr>
                            <tr><td><code>contract_analysis</code></td><td>AI extraction results</td><td>contractId, parties, terms, risks</td></tr>
                            <tr><td><code>contract_embeddings</code></td><td>Vector embeddings (pgvector)</td><td>contractId, embedding, chunkText</td></tr>
                            <tr><td><code>contract_versions</code></td><td>Version history</td><td>contractId, version, changes</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>ğŸ§® Calculation Engine</span>
                    <span class="accordion-icon">â–¼</span>
                </div>
                <div class="accordion-content">
                    <table class="data-table">
                        <thead>
                            <tr><th>Table</th><th>Description</th><th>Key Fields</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>royalty_rules</code></td><td>Payment calculation rules</td><td>contractId, ruleType, formula (JSON)</td></tr>
                            <tr><td><code>sales_data</code></td><td>Revenue records for calculation</td><td>locationId, product, amount, date</td></tr>
                            <tr><td><code>calculation_runs</code></td><td>Execution history</td><td>id, contractId, status, results</td></tr>
                            <tr><td><code>calculation_results</code></td><td>Itemized calculation outputs</td><td>runId, lineItem, amount</td></tr>
                            <tr><td><code>invoices</code></td><td>Generated invoices</td><td>calculationRunId, pdfPath, status</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>ğŸ”— ERP Integration</span>
                    <span class="accordion-icon">â–¼</span>
                </div>
                <div class="accordion-content">
                    <table class="data-table">
                        <thead>
                            <tr><th>Table</th><th>Description</th><th>Key Fields</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>erp_systems</code></td><td>ERP configurations</td><td>id, name, type, authConfig</td></tr>
                            <tr><td><code>erp_entities</code></td><td>Data entities from ERP</td><td>erpSystemId, name, fields</td></tr>
                            <tr><td><code>erp_fields</code></td><td>Entity field definitions</td><td>entityId, name, dataType</td></tr>
                            <tr><td><code>master_data_mappings</code></td><td>Field mappings</td><td>erpFieldId, liqFieldId, version</td></tr>
                            <tr><td><code>import_jobs</code></td><td>Import execution history</td><td>id, erpSystemId, status, filters</td></tr>
                            <tr><td><code>imported_erp_records</code></td><td>Imported data records</td><td>importJobId, mappingId, data</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>ğŸ’¬ AI & Chat</span>
                    <span class="accordion-icon">â–¼</span>
                </div>
                <div class="accordion-content">
                    <table class="data-table">
                        <thead>
                            <tr><th>Table</th><th>Description</th><th>Key Fields</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>chat_sessions</code></td><td>Q&A conversation sessions</td><td>id, userId, contractId, context</td></tr>
                            <tr><td><code>chat_messages</code></td><td>Individual messages</td><td>sessionId, role, content, citations</td></tr>
                            <tr><td><code>ai_extraction_logs</code></td><td>AI processing audit trail</td><td>contractId, prompt, response, tokens</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <h3>Database Technologies</h3>
    <div class="tech-grid">
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ˜</div>
            <div class="tech-item-name">PostgreSQL</div>
            <div class="tech-item-desc">Primary Database</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">â˜ï¸</div>
            <div class="tech-item-name">Neon</div>
            <div class="tech-item-desc">Serverless Hosting</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ”·</div>
            <div class="tech-item-name">Drizzle ORM</div>
            <div class="tech-item-desc">TypeScript ORM</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ“Š</div>
            <div class="tech-item-name">pgvector</div>
            <div class="tech-item-desc">Vector Storage</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ“‹</div>
            <div class="tech-item-name">drizzle-zod</div>
            <div class="tech-item-desc">Schema Validation</div>
        </div>
        <div class="tech-item">
            <div class="tech-item-icon">ğŸ”„</div>
            <div class="tech-item-name">drizzle-kit</div>
            <div class="tech-item-desc">Migrations</div>
        </div>
    </div>
</div>

<!-- INTEGRATION TAB -->
<div id="integration" class="tab-content">
    <h2>Integration Architecture</h2>
    <p>Universal ERP integration framework supporting any system through AI-powered field mapping, OAuth2/API Key authentication, and version-controlled configurations. This section provides a complete end-to-end view of the integration pipeline from initial connection to data import.</p>

    <div class="layer-section">
        <div class="layer-header">
            <span class="layer-badge backend">Integration Hub</span>
            <span>Universal ERP Connector Framework</span>
        </div>

        <h3>Supported ERP Systems</h3>
        <div class="tech-grid">
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ”´</div>
                <div class="tech-item-name">Oracle Fusion</div>
                <div class="tech-item-desc">Cloud ERP</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸ”µ</div>
                <div class="tech-item-name">SAP S/4HANA</div>
                <div class="tech-item-desc">Enterprise ERP</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸŸ </div>
                <div class="tech-item-name">NetSuite</div>
                <div class="tech-item-desc">Cloud ERP</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸŸ£</div>
                <div class="tech-item-name">Dynamics 365</div>
                <div class="tech-item-desc">Microsoft ERP</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">ğŸŸ¢</div>
                <div class="tech-item-name">QuickBooks</div>
                <div class="tech-item-desc">SMB Accounting</div>
            </div>
            <div class="tech-item">
                <div class="tech-item-icon">âšª</div>
                <div class="tech-item-name">Any REST API</div>
                <div class="tech-item-desc">Universal Connector</div>
            </div>
        </div>
    </div>

    <!-- COMPLETE END-TO-END PIPELINE DIAGRAM -->
    <h3>Complete End-to-End Integration Pipeline</h3>
    <div class="diagram-container" style="background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%); padding: 30px; border-radius: 20px;">
        <svg viewBox="0 0 1200 1400" xmlns="http://www.w3.org/2000/svg" style="border: none;">
            <defs>
                <linearGradient id="intEmeraldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#10b981"/>
                    <stop offset="100%" style="stop-color:#059669"/>
                </linearGradient>
                <linearGradient id="intBlueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#3b82f6"/>
                    <stop offset="100%" style="stop-color:#2563eb"/>
                </linearGradient>
                <linearGradient id="intPurpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#8b5cf6"/>
                    <stop offset="100%" style="stop-color:#7c3aed"/>
                </linearGradient>
                <linearGradient id="intOrangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#f97316"/>
                    <stop offset="100%" style="stop-color:#ea580c"/>
                </linearGradient>
                <linearGradient id="intPinkGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ec4899"/>
                    <stop offset="100%" style="stop-color:#db2777"/>
                </linearGradient>
                <linearGradient id="intCyanGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#06b6d4"/>
                    <stop offset="100%" style="stop-color:#0891b2"/>
                </linearGradient>
                <linearGradient id="intYellowGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#eab308"/>
                    <stop offset="100%" style="stop-color:#ca8a04"/>
                </linearGradient>
                <linearGradient id="intRedGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ef4444"/>
                    <stop offset="100%" style="stop-color:#dc2626"/>
                </linearGradient>
                <filter id="intShadow">
                    <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.4"/>
                </filter>
                <marker id="intArrowWhite" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="white"/>
                </marker>
                <marker id="intArrowGreen" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="#10b981"/>
                </marker>
            </defs>

            <!-- Title -->
            <text x="600" y="40" text-anchor="middle" fill="white" font-size="24" font-weight="700">ERP Integration: Complete End-to-End Pipeline</text>
            <text x="600" y="65" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="14">From Connection Setup to Data Import</text>

            <!-- ========== PHASE 1: ERP CONNECTION ========== -->
            <rect x="50" y="90" width="1100" height="180" rx="16" fill="rgba(16,185,129,0.1)" stroke="#10b981" stroke-width="2"/>
            <text x="100" y="120" fill="#10b981" font-size="16" font-weight="700">PHASE 1: ERP CONNECTION SETUP</text>

            <!-- Step 1.1: Select ERP Type -->
            <g filter="url(#intShadow)">
                <rect x="80" y="140" width="160" height="110" rx="14" fill="url(#intEmeraldGrad)"/>
                <text x="160" y="175" text-anchor="middle" fill="white" font-size="28">ğŸ¢</text>
                <text x="160" y="205" text-anchor="middle" fill="white" font-size="12" font-weight="600">1.1 Select ERP</text>
                <text x="160" y="225" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Choose from catalog</text>
                <text x="160" y="240" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">or add custom</text>
            </g>

            <!-- Arrow -->
            <path d="M 240 195 L 280 195" stroke="#10b981" stroke-width="3" marker-end="url(#intArrowGreen)"/>

            <!-- Step 1.2: Configure Connection -->
            <g filter="url(#intShadow)">
                <rect x="290" y="140" width="160" height="110" rx="14" fill="url(#intEmeraldGrad)"/>
                <text x="370" y="175" text-anchor="middle" fill="white" font-size="28">âš™ï¸</text>
                <text x="370" y="205" text-anchor="middle" fill="white" font-size="12" font-weight="600">1.2 Configure</text>
                <text x="370" y="225" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Base URL, Instance</text>
                <text x="370" y="240" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">API Version</text>
            </g>

            <!-- Arrow -->
            <path d="M 450 195 L 490 195" stroke="#10b981" stroke-width="3" marker-end="url(#intArrowGreen)"/>

            <!-- Step 1.3: Authentication -->
            <g filter="url(#intShadow)">
                <rect x="500" y="140" width="160" height="110" rx="14" fill="url(#intEmeraldGrad)"/>
                <text x="580" y="175" text-anchor="middle" fill="white" font-size="28">ğŸ”</text>
                <text x="580" y="205" text-anchor="middle" fill="white" font-size="12" font-weight="600">1.3 Authentication</text>
                <text x="580" y="225" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">OAuth2 / API Key</text>
                <text x="580" y="240" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Basic Auth</text>
            </g>

            <!-- Arrow -->
            <path d="M 660 195 L 700 195" stroke="#10b981" stroke-width="3" marker-end="url(#intArrowGreen)"/>

            <!-- Step 1.4: Test Connection -->
            <g filter="url(#intShadow)">
                <rect x="710" y="140" width="160" height="110" rx="14" fill="url(#intEmeraldGrad)"/>
                <text x="790" y="175" text-anchor="middle" fill="white" font-size="28">âœ…</text>
                <text x="790" y="205" text-anchor="middle" fill="white" font-size="12" font-weight="600">1.4 Test Connection</text>
                <text x="790" y="225" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Inline credential</text>
                <text x="790" y="240" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">validation</text>
            </g>

            <!-- Arrow -->
            <path d="M 870 195 L 910 195" stroke="#10b981" stroke-width="3" marker-end="url(#intArrowGreen)"/>

            <!-- Step 1.5: Save System -->
            <g filter="url(#intShadow)">
                <rect x="920" y="140" width="160" height="110" rx="14" fill="url(#intEmeraldGrad)"/>
                <text x="1000" y="175" text-anchor="middle" fill="white" font-size="28">ğŸ’¾</text>
                <text x="1000" y="205" text-anchor="middle" fill="white" font-size="12" font-weight="600">1.5 Save System</text>
                <text x="1000" y="225" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">erp_systems table</text>
                <text x="1000" y="240" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">with auth config</text>
            </g>

            <!-- Phase 1 to Phase 2 Arrow -->
            <path d="M 600 270 L 600 310" stroke="white" stroke-width="3" marker-end="url(#intArrowWhite)"/>

            <!-- ========== PHASE 2: ENTITY & FIELD DISCOVERY ========== -->
            <rect x="50" y="320" width="1100" height="180" rx="16" fill="rgba(59,130,246,0.1)" stroke="#3b82f6" stroke-width="2"/>
            <text x="100" y="350" fill="#3b82f6" font-size="16" font-weight="700">PHASE 2: ENTITY & FIELD DISCOVERY</text>

            <!-- Step 2.1: Fetch Entities -->
            <g filter="url(#intShadow)">
                <rect x="80" y="370" width="180" height="110" rx="14" fill="url(#intBlueGrad)"/>
                <text x="170" y="405" text-anchor="middle" fill="white" font-size="28">ğŸ“‚</text>
                <text x="170" y="435" text-anchor="middle" fill="white" font-size="12" font-weight="600">2.1 Fetch ERP Entities</text>
                <text x="170" y="455" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Customers, Products</text>
                <text x="170" y="470" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Orders, Invoices</text>
            </g>

            <!-- Arrow -->
            <path d="M 260 425 L 310 425" stroke="#3b82f6" stroke-width="3"/>
            <polygon points="305,420 320,425 305,430" fill="#3b82f6"/>

            <!-- Step 2.2: Extract Field Schema -->
            <g filter="url(#intShadow)">
                <rect x="320" y="370" width="180" height="110" rx="14" fill="url(#intBlueGrad)"/>
                <text x="410" y="405" text-anchor="middle" fill="white" font-size="28">ğŸ“‹</text>
                <text x="410" y="435" text-anchor="middle" fill="white" font-size="12" font-weight="600">2.2 Extract Fields</text>
                <text x="410" y="455" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Field names, types</text>
                <text x="410" y="470" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">constraints, samples</text>
            </g>

            <!-- Arrow -->
            <path d="M 500 425 L 550 425" stroke="#3b82f6" stroke-width="3"/>
            <polygon points="545,420 560,425 545,430" fill="#3b82f6"/>

            <!-- Step 2.3: Store in DB -->
            <g filter="url(#intShadow)">
                <rect x="560" y="370" width="180" height="110" rx="14" fill="url(#intBlueGrad)"/>
                <text x="650" y="405" text-anchor="middle" fill="white" font-size="28">ğŸ—„ï¸</text>
                <text x="650" y="435" text-anchor="middle" fill="white" font-size="12" font-weight="600">2.3 Store Schema</text>
                <text x="650" y="455" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">erp_entities table</text>
                <text x="650" y="470" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">erp_fields table</text>
            </g>

            <!-- Arrow -->
            <path d="M 740 425 L 790 425" stroke="#3b82f6" stroke-width="3"/>
            <polygon points="785,420 800,425 785,430" fill="#3b82f6"/>

            <!-- Step 2.4: Load LicenseIQ Schema -->
            <g filter="url(#intShadow)">
                <rect x="800" y="370" width="200" height="110" rx="14" fill="url(#intBlueGrad)"/>
                <text x="900" y="405" text-anchor="middle" fill="white" font-size="28">ğŸ“Š</text>
                <text x="900" y="435" text-anchor="middle" fill="white" font-size="12" font-weight="600">2.4 LicenseIQ Schema</text>
                <text x="900" y="455" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Standard fields catalog</text>
                <text x="900" y="470" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">for mapping targets</text>
            </g>

            <!-- Phase 2 to Phase 3 Arrow -->
            <path d="M 600 500 L 600 540" stroke="white" stroke-width="3" marker-end="url(#intArrowWhite)"/>

            <!-- ========== PHASE 3: AI FIELD MAPPING ========== -->
            <rect x="50" y="550" width="1100" height="200" rx="16" fill="rgba(139,92,246,0.1)" stroke="#8b5cf6" stroke-width="2"/>
            <text x="100" y="580" fill="#8b5cf6" font-size="16" font-weight="700">PHASE 3: AI-POWERED FIELD MAPPING</text>

            <!-- Step 3.1: Select Entity -->
            <g filter="url(#intShadow)">
                <rect x="80" y="600" width="150" height="130" rx="14" fill="url(#intPurpleGrad)"/>
                <text x="155" y="640" text-anchor="middle" fill="white" font-size="28">â˜‘ï¸</text>
                <text x="155" y="670" text-anchor="middle" fill="white" font-size="11" font-weight="600">3.1 Select Entity</text>
                <text x="155" y="690" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Choose entity to</text>
                <text x="155" y="705" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">map (e.g. Orders)</text>
            </g>

            <!-- Arrow -->
            <path d="M 230 665 L 260 665" stroke="#8b5cf6" stroke-width="3"/>
            <polygon points="255,660 270,665 255,670" fill="#8b5cf6"/>

            <!-- Step 3.2: AI Analysis -->
            <g filter="url(#intShadow)">
                <rect x="270" y="600" width="150" height="130" rx="14" fill="url(#intPurpleGrad)"/>
                <text x="345" y="640" text-anchor="middle" fill="white" font-size="28">ğŸ§ </text>
                <text x="345" y="670" text-anchor="middle" fill="white" font-size="11" font-weight="600">3.2 AI Analysis</text>
                <text x="345" y="690" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">LLaMA 3.3 70B</text>
                <text x="345" y="705" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">semantic matching</text>
            </g>

            <!-- Arrow -->
            <path d="M 420 665 L 450 665" stroke="#8b5cf6" stroke-width="3"/>
            <polygon points="445,660 460,665 445,670" fill="#8b5cf6"/>

            <!-- Step 3.3: Confidence Scores -->
            <g filter="url(#intShadow)">
                <rect x="460" y="600" width="150" height="130" rx="14" fill="url(#intPurpleGrad)"/>
                <text x="535" y="640" text-anchor="middle" fill="white" font-size="28">ğŸ“ˆ</text>
                <text x="535" y="670" text-anchor="middle" fill="white" font-size="11" font-weight="600">3.3 Confidence</text>
                <text x="535" y="690" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Score each match</text>
                <text x="535" y="705" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">0-100% confidence</text>
            </g>

            <!-- Arrow -->
            <path d="M 610 665 L 640 665" stroke="#8b5cf6" stroke-width="3"/>
            <polygon points="635,660 650,665 635,670" fill="#8b5cf6"/>

            <!-- Step 3.4: Human Review -->
            <g filter="url(#intShadow)">
                <rect x="650" y="600" width="150" height="130" rx="14" fill="url(#intOrangeGrad)"/>
                <text x="725" y="640" text-anchor="middle" fill="white" font-size="28">ğŸ‘¤</text>
                <text x="725" y="670" text-anchor="middle" fill="white" font-size="11" font-weight="600">3.4 Human Review</text>
                <text x="725" y="690" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Override low</text>
                <text x="725" y="705" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">confidence mappings</text>
            </g>

            <!-- Arrow -->
            <path d="M 800 665 L 830 665" stroke="#f97316" stroke-width="3"/>
            <polygon points="825,660 840,665 825,670" fill="#f97316"/>

            <!-- Step 3.5: Save Mapping -->
            <g filter="url(#intShadow)">
                <rect x="840" y="600" width="170" height="130" rx="14" fill="url(#intPurpleGrad)"/>
                <text x="925" y="640" text-anchor="middle" fill="white" font-size="28">ğŸ’¾</text>
                <text x="925" y="670" text-anchor="middle" fill="white" font-size="11" font-weight="600">3.5 Save Mapping</text>
                <text x="925" y="690" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">master_data_mappings</text>
                <text x="925" y="705" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Version 1 created</text>
            </g>

            <!-- Phase 3 to Phase 4 Arrow -->
            <path d="M 600 750 L 600 790" stroke="white" stroke-width="3" marker-end="url(#intArrowWhite)"/>

            <!-- ========== PHASE 4: PRE-IMPORT CONFIGURATION ========== -->
            <rect x="50" y="800" width="1100" height="180" rx="16" fill="rgba(234,179,8,0.1)" stroke="#eab308" stroke-width="2"/>
            <text x="100" y="830" fill="#eab308" font-size="16" font-weight="700">PHASE 4: PRE-IMPORT CONFIGURATION</text>

            <!-- Step 4.1: Build Filters -->
            <g filter="url(#intShadow)">
                <rect x="80" y="850" width="200" height="110" rx="14" fill="url(#intYellowGrad)"/>
                <text x="180" y="885" text-anchor="middle" fill="white" font-size="28">ğŸ”</text>
                <text x="180" y="915" text-anchor="middle" fill="white" font-size="12" font-weight="600">4.1 Build Filters</text>
                <text x="180" y="935" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">AND/OR logic, operators</text>
                <text x="180" y="950" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">equals, contains, between</text>
            </g>

            <!-- Arrow -->
            <path d="M 280 905 L 330 905" stroke="#eab308" stroke-width="3"/>
            <polygon points="325,900 340,905 325,910" fill="#eab308"/>

            <!-- Step 4.2: Test Filters -->
            <g filter="url(#intShadow)">
                <rect x="340" y="850" width="200" height="110" rx="14" fill="url(#intYellowGrad)"/>
                <text x="440" y="885" text-anchor="middle" fill="white" font-size="28">ğŸ§ª</text>
                <text x="440" y="915" text-anchor="middle" fill="white" font-size="12" font-weight="600">4.2 Test Filters</text>
                <text x="440" y="935" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">Preview filter results</text>
                <text x="440" y="950" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">before actual import</text>
            </g>

            <!-- Arrow -->
            <path d="M 540 905 L 590 905" stroke="#eab308" stroke-width="3"/>
            <polygon points="585,900 600,905 585,910" fill="#eab308"/>

            <!-- Step 4.3: Location Assignment -->
            <g filter="url(#intShadow)">
                <rect x="600" y="850" width="200" height="110" rx="14" fill="url(#intYellowGrad)"/>
                <text x="700" y="885" text-anchor="middle" fill="white" font-size="28">ğŸ“</text>
                <text x="700" y="915" text-anchor="middle" fill="white" font-size="12" font-weight="600">4.3 Assign Location</text>
                <text x="700" y="935" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">Company/BU/Location</text>
                <text x="700" y="950" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">for multi-tenant isolation</text>
            </g>

            <!-- Arrow -->
            <path d="M 800 905 L 850 905" stroke="#eab308" stroke-width="3"/>
            <polygon points="845,900 860,905 845,910" fill="#eab308"/>

            <!-- Step 4.4: Dry Run -->
            <g filter="url(#intShadow)">
                <rect x="860" y="850" width="200" height="110" rx="14" fill="url(#intYellowGrad)"/>
                <text x="960" y="885" text-anchor="middle" fill="white" font-size="28">ğŸ‘ï¸</text>
                <text x="960" y="915" text-anchor="middle" fill="white" font-size="12" font-weight="600">4.4 Dry Run Preview</text>
                <text x="960" y="935" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">See import results</text>
                <text x="960" y="950" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">without committing</text>
            </g>

            <!-- Phase 4 to Phase 5 Arrow -->
            <path d="M 600 980 L 600 1020" stroke="white" stroke-width="3" marker-end="url(#intArrowWhite)"/>

            <!-- ========== PHASE 5: DATA IMPORT EXECUTION ========== -->
            <rect x="50" y="1030" width="1100" height="180" rx="16" fill="rgba(236,72,153,0.1)" stroke="#ec4899" stroke-width="2"/>
            <text x="100" y="1060" fill="#ec4899" font-size="16" font-weight="700">PHASE 5: DATA IMPORT EXECUTION</text>

            <!-- Step 5.1: Create Import Job -->
            <g filter="url(#intShadow)">
                <rect x="80" y="1080" width="160" height="110" rx="14" fill="url(#intPinkGrad)"/>
                <text x="160" y="1115" text-anchor="middle" fill="white" font-size="28">ğŸ“</text>
                <text x="160" y="1145" text-anchor="middle" fill="white" font-size="11" font-weight="600">5.1 Create Job</text>
                <text x="160" y="1165" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">import_jobs table</text>
                <text x="160" y="1180" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">status: pending</text>
            </g>

            <!-- Arrow -->
            <path d="M 240 1135 L 275 1135" stroke="#ec4899" stroke-width="3"/>
            <polygon points="270,1130 285,1135 270,1140" fill="#ec4899"/>

            <!-- Step 5.2: Fetch from ERP -->
            <g filter="url(#intShadow)">
                <rect x="285" y="1080" width="160" height="110" rx="14" fill="url(#intPinkGrad)"/>
                <text x="365" y="1115" text-anchor="middle" fill="white" font-size="28">ğŸ”„</text>
                <text x="365" y="1145" text-anchor="middle" fill="white" font-size="11" font-weight="600">5.2 Fetch Data</text>
                <text x="365" y="1165" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Call ERP API</text>
                <text x="365" y="1180" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Apply filters</text>
            </g>

            <!-- Arrow -->
            <path d="M 445 1135 L 480 1135" stroke="#ec4899" stroke-width="3"/>
            <polygon points="475,1130 490,1135 475,1140" fill="#ec4899"/>

            <!-- Step 5.3: Transform -->
            <g filter="url(#intShadow)">
                <rect x="490" y="1080" width="160" height="110" rx="14" fill="url(#intPinkGrad)"/>
                <text x="570" y="1115" text-anchor="middle" fill="white" font-size="28">âš—ï¸</text>
                <text x="570" y="1145" text-anchor="middle" fill="white" font-size="11" font-weight="600">5.3 Transform</text>
                <text x="570" y="1165" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Apply field mappings</text>
                <text x="570" y="1180" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Data normalization</text>
            </g>

            <!-- Arrow -->
            <path d="M 650 1135 L 685 1135" stroke="#ec4899" stroke-width="3"/>
            <polygon points="680,1130 695,1135 680,1140" fill="#ec4899"/>

            <!-- Step 5.4: Validate -->
            <g filter="url(#intShadow)">
                <rect x="695" y="1080" width="160" height="110" rx="14" fill="url(#intPinkGrad)"/>
                <text x="775" y="1115" text-anchor="middle" fill="white" font-size="28">âœ…</text>
                <text x="775" y="1145" text-anchor="middle" fill="white" font-size="11" font-weight="600">5.4 Validate</text>
                <text x="775" y="1165" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Schema validation</text>
                <text x="775" y="1180" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Error logging</text>
            </g>

            <!-- Arrow -->
            <path d="M 855 1135 L 890 1135" stroke="#ec4899" stroke-width="3"/>
            <polygon points="885,1130 900,1135 885,1140" fill="#ec4899"/>

            <!-- Step 5.5: Store -->
            <g filter="url(#intShadow)">
                <rect x="900" y="1080" width="160" height="110" rx="14" fill="url(#intCyanGrad)"/>
                <text x="980" y="1115" text-anchor="middle" fill="white" font-size="28">ğŸ’¾</text>
                <text x="980" y="1145" text-anchor="middle" fill="white" font-size="11" font-weight="600">5.5 Store Records</text>
                <text x="980" y="1165" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">imported_erp_records</text>
                <text x="980" y="1180" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Job complete âœ“</text>
            </g>

            <!-- Phase 5 to Phase 6 Arrow -->
            <path d="M 600 1210 L 600 1250" stroke="white" stroke-width="3" marker-end="url(#intArrowWhite)"/>

            <!-- ========== PHASE 6: POST-IMPORT & VERSIONING ========== -->
            <rect x="50" y="1260" width="1100" height="120" rx="16" fill="rgba(6,182,212,0.1)" stroke="#06b6d4" stroke-width="2"/>
            <text x="100" y="1290" fill="#06b6d4" font-size="16" font-weight="700">PHASE 6: POST-IMPORT & VERSION CONTROL</text>

            <!-- Step 6.1: Audit Log -->
            <g filter="url(#intShadow)">
                <rect x="100" y="1305" width="200" height="60" rx="12" fill="url(#intCyanGrad)"/>
                <text x="200" y="1342" text-anchor="middle" fill="white" font-size="12" font-weight="600">ğŸ“‹ Audit Log Entry</text>
            </g>

            <!-- Step 6.2: Import Stats -->
            <g filter="url(#intShadow)">
                <rect x="340" y="1305" width="200" height="60" rx="12" fill="url(#intCyanGrad)"/>
                <text x="440" y="1342" text-anchor="middle" fill="white" font-size="12" font-weight="600">ğŸ“Š Import Statistics</text>
            </g>

            <!-- Step 6.3: Version History -->
            <g filter="url(#intShadow)">
                <rect x="580" y="1305" width="200" height="60" rx="12" fill="url(#intCyanGrad)"/>
                <text x="680" y="1342" text-anchor="middle" fill="white" font-size="12" font-weight="600">ğŸ”„ Mapping Versions</text>
            </g>

            <!-- Step 6.4: Ready for Use -->
            <g filter="url(#intShadow)">
                <rect x="820" y="1305" width="230" height="60" rx="12" fill="url(#intEmeraldGrad)"/>
                <text x="935" y="1342" text-anchor="middle" fill="white" font-size="12" font-weight="600">âœ¨ Data Ready for Calculations</text>
            </g>
        </svg>
    </div>

    <h3>Integration Features</h3>
    <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ¤–</div>
            <h4>AI Field Mapping</h4>
            <p>LLaMA-powered semantic matching between ERP fields and LicenseIQ schema with confidence scores and manual override.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ”</div>
            <h4>Multi-Auth Support</h4>
            <p>OAuth2, API Key, and Basic Auth with secure credential management. OAuth2 client secrets are NOT stored in database for security.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“‹</div>
            <h4>Version Control</h4>
            <p>Full version history for field mappings with revert capability and approval workflows for production changes.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ”</div>
            <h4>Pre-Import Filtering</h4>
            <p>Industry-standard filter builder with AND/OR logic for text, number, date, and boolean fields. Preview before import.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ‘ï¸</div>
            <h4>Dry-Run Preview</h4>
            <p>Preview import results before committing. Test filters and mappings without affecting production data.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“Š</div>
            <h4>Import Analytics</h4>
            <p>Detailed statistics on imported records, errors, transformation results, and filter hit counts.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ¢</div>
            <h4>Multi-Tenant Isolation</h4>
            <p>Each import is scoped to Company/BU/Location. Data isolation enforced at import time.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ—‘ï¸</div>
            <h4>Cascade Delete</h4>
            <p>Deleting a field mapping properly removes all related imported records for data integrity.</p>
        </div>
    </div>

    <h3>Database Tables Involved</h3>
    <table class="data-table">
        <thead>
            <tr>
                <th>Phase</th>
                <th>Table</th>
                <th>Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Phase 1</td>
                <td><code>erp_systems</code></td>
                <td>Store ERP connection config (URL, auth type, encrypted credentials)</td>
            </tr>
            <tr>
                <td>Phase 2</td>
                <td><code>erp_entities</code></td>
                <td>Store discovered entities from ERP (Customers, Orders, etc.)</td>
            </tr>
            <tr>
                <td>Phase 2</td>
                <td><code>erp_fields</code></td>
                <td>Store field schema for each entity (name, type, constraints)</td>
            </tr>
            <tr>
                <td>Phase 3</td>
                <td><code>master_data_mappings</code></td>
                <td>Store AI-generated and human-reviewed field mappings with versions</td>
            </tr>
            <tr>
                <td>Phase 3</td>
                <td><code>licenseiq_schema_fields</code></td>
                <td>Target schema fields for mapping (standard LicenseIQ fields)</td>
            </tr>
            <tr>
                <td>Phase 5</td>
                <td><code>import_jobs</code></td>
                <td>Track import job execution with status, filters, and statistics</td>
            </tr>
            <tr>
                <td>Phase 5</td>
                <td><code>imported_erp_records</code></td>
                <td>Store actual imported data records linked to mappings and jobs</td>
            </tr>
        </tbody>
    </table>

    <div class="info-box">
        <h5>Security Design Decision</h5>
        <p>OAuth2 client secrets are intentionally NOT stored in the database. Users enter credentials in an inline test panel during connection setup, and they are only transmitted during the test request. This prevents credential exposure if the database is compromised.</p>
    </div>
</div>

<!-- SECURITY TAB -->
<div id="security" class="tab-content">
    <h2>Security Architecture</h2>
    <p>Enterprise-grade security with 5-tier RBAC, multi-tenant data isolation, secure session management, and comprehensive audit logging.</p>

    <div class="layer-section">
        <div class="layer-header">
            <span class="layer-badge infra">Security Layer</span>
            <span>Authentication + Authorization + Data Isolation</span>
        </div>

        <h3>Role-Based Access Control (RBAC)</h3>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Role</th>
                    <th>Level</th>
                    <th>Capabilities</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>System Admin</strong></td>
                    <td>Global</td>
                    <td>Full access to all companies, users, and settings. Super user.</td>
                </tr>
                <tr>
                    <td><strong>Company Admin</strong></td>
                    <td>Company</td>
                    <td>Manage all BUs and Locations within their company. User management.</td>
                </tr>
                <tr>
                    <td><strong>Manager</strong></td>
                    <td>BU/Location</td>
                    <td>Full access to assigned scope. Create/edit contracts and rules.</td>
                </tr>
                <tr>
                    <td><strong>Analyst</strong></td>
                    <td>BU/Location</td>
                    <td>View and analyze data. Run calculations. Cannot create contracts.</td>
                </tr>
                <tr>
                    <td><strong>Viewer</strong></td>
                    <td>BU/Location</td>
                    <td>Read-only access to assigned scope.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h3>Security Features</h3>
    <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-icon">ğŸ”</div>
            <h4>Session-Based Auth</h4>
            <p>Passport.js with secure HTTP-only cookies. PostgreSQL session store with automatic cleanup.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ¢</div>
            <h4>Multi-Tenant Isolation</h4>
            <p>Automatic data filtering on all queries based on user's organizational context. No cross-tenant data leakage.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ”‘</div>
            <h4>Password Security</h4>
            <p>bcrypt hashing with salt rounds. No plaintext password storage.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸ“</div>
            <h4>Audit Logging</h4>
            <p>Track all user actions, data changes, and system events for compliance.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">ğŸŒ</div>
            <h4>HTTPS Only</h4>
            <p>All traffic encrypted in transit. Secure cookie flags enabled.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">âœ…</div>
            <h4>Input Validation</h4>
            <p>Zod schema validation on all API inputs. Protection against injection attacks.</p>
        </div>
    </div>

    <h3>Multi-Tenant Data Flow</h3>
    <div class="diagram-container">
        <div class="diagram-title">Hierarchical Access Control</div>
        <div class="arch-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ORGANIZATION HIERARCHY                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        COMPANY (Level 1)                                 â”‚â”‚
â”‚  â”‚                     Acme Corporation                                     â”‚â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚â”‚
â”‚  â”‚              â”‚  Company Admin: Full company access   â”‚                    â”‚â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚â”‚
â”‚  â”‚                              â”‚                                            â”‚â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚â”‚
â”‚  â”‚          â–¼                   â–¼                   â–¼                        â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚â”‚
â”‚  â”‚  â”‚ BUSINESS UNIT 1 â”‚ â”‚ BUSINESS UNIT 2 â”‚ â”‚ BUSINESS UNIT 3 â”‚             â”‚â”‚
â”‚  â”‚  â”‚  North America  â”‚ â”‚     Europe      â”‚ â”‚   Asia-Pacific  â”‚             â”‚â”‚
â”‚  â”‚  â”‚  (Level 2)      â”‚ â”‚  (Level 2)      â”‚ â”‚   (Level 2)     â”‚             â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚â”‚
â”‚  â”‚           â”‚                   â”‚                   â”‚                       â”‚â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”               â”‚â”‚
â”‚  â”‚    â–¼      â–¼      â–¼     â–¼      â–¼      â–¼     â–¼      â–¼      â–¼               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”            â”‚â”‚
â”‚  â”‚  â”‚NYCâ”‚  â”‚LA â”‚  â”‚CHIâ”‚ â”‚LONâ”‚  â”‚PARâ”‚  â”‚BERâ”‚ â”‚TOKâ”‚  â”‚SYDâ”‚  â”‚SINâ”‚            â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚  Location (Level 3) - Most granular access control                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                               â”‚
â”‚  DATA ISOLATION:                                                              â”‚
â”‚  â€¢ Users see ONLY data from their assigned Company/BU/Location               â”‚
â”‚  â€¢ Queries automatically filtered by organizational context                  â”‚
â”‚  â€¢ Admin bypass with full audit trail                                        â”‚
â”‚  â€¢ Context switching via location picker (permission-based)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>
    </div>
</div>

<!-- DATA FLOW TAB -->
<div id="dataflow" class="tab-content">
    <h2>Data Flow Architecture</h2>
    <p>End-to-end data flow from contract upload through AI analysis to payment calculations and ERP sync.</p>

    <h3>Contract Processing Flow</h3>
    <div class="diagram-container">
        <div class="diagram-title">Contract â†’ Analysis â†’ Calculation Pipeline</div>
        <div class="arch-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CONTRACT PROCESSING PIPELINE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                    â”‚
â”‚  â”‚   CONTRACT   â”‚                                                                    â”‚
â”‚  â”‚   UPLOAD     â”‚                                                                    â”‚
â”‚  â”‚  (PDF/DOCX)  â”‚                                                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                                    â”‚
â”‚         â”‚                                                                            â”‚
â”‚         â–¼                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          1. DOCUMENT INGESTION                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚   Multer   â”‚ â†’ â”‚ PDF Parse  â”‚ â†’ â”‚  Chunking  â”‚ â†’ â”‚  Storage   â”‚           â”‚   â”‚
â”‚  â”‚  â”‚   Upload   â”‚   â”‚   Extract  â”‚   â”‚   (1000)   â”‚   â”‚  Contract  â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                            â”‚
â”‚         â–¼                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          2. AI ANALYSIS                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚  â”‚  Entity        â”‚   â”‚  Risk          â”‚   â”‚  Payment       â”‚                 â”‚   â”‚
â”‚  â”‚  â”‚  Extraction    â”‚   â”‚  Assessment    â”‚   â”‚  Terms         â”‚                 â”‚   â”‚
â”‚  â”‚  â”‚  (LLaMA 70B)   â”‚   â”‚  (LLaMA 70B)   â”‚   â”‚  (LLaMA 70B)   â”‚                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚          â”‚                    â”‚                    â”‚                           â”‚   â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚  â”‚                               â”‚                                                â”‚   â”‚
â”‚  â”‚                               â–¼                                                â”‚   â”‚
â”‚  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚   â”‚
â”‚  â”‚                   â”‚   contract_analysis    â”‚                                   â”‚   â”‚
â”‚  â”‚                   â”‚   (Structured JSON)    â”‚                                   â”‚   â”‚
â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                            â”‚
â”‚         â–¼                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          3. EMBEDDING GENERATION                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚  â”‚  Text Chunks   â”‚ â†’ â”‚  HuggingFace   â”‚ â†’ â”‚  pgvector      â”‚                 â”‚   â”‚
â”‚  â”‚  â”‚  (Contract)    â”‚   â”‚  Embeddings    â”‚   â”‚  Storage       â”‚                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                            â”‚
â”‚         â–¼                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          4. RULE GENERATION                                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚  â”‚  Payment Terms â”‚ â†’ â”‚  AI Rule       â”‚ â†’ â”‚  FormulaNode   â”‚                 â”‚   â”‚
â”‚  â”‚  â”‚  (Natural Lang)â”‚   â”‚  Generator     â”‚   â”‚  JSON Tree     â”‚                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                            â”‚
â”‚         â–¼                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          5. READY FOR CALCULATION                              â”‚   â”‚
â”‚  â”‚                                                                                â”‚   â”‚
â”‚  â”‚   Contract + Analysis + Rules + Embeddings = Complete Processing              â”‚   â”‚
â”‚  â”‚                                                                                â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚   â”‚
â”‚  â”‚   â”‚  Dashboard  â”‚   â”‚  liQ AI     â”‚   â”‚  Calculator â”‚                         â”‚   â”‚
â”‚  â”‚   â”‚  Analytics  â”‚   â”‚  Q&A Ready  â”‚   â”‚  Ready      â”‚                         â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>
    </div>

    <h3>Payment Calculation Flow</h3>
    <div class="flow-container">
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“Š</div>
            <div class="flow-node-label">Sales Data</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ”—</div>
            <div class="flow-node-label">Contract Match</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“</div>
            <div class="flow-node-label">Apply Rules</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ§®</div>
            <div class="flow-node-label">Calculate</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“„</div>
            <div class="flow-node-label">Invoice PDF</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-node">
            <div class="flow-node-icon">ğŸ“¤</div>
            <div class="flow-node-label">ERP Sync</div>
        </div>
    </div>

    <h3>liQ AI Q&A Flow</h3>
    <div class="diagram-container">
        <div class="diagram-title">RAG-Powered Document Q&A</div>
        <div class="arch-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      liQ AI QUERY PROCESSING                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  USER QUERY: "What is the minimum annual payment?"               â”‚
â”‚                          â”‚                                        â”‚
â”‚                          â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. QUERY EMBEDDING                                        â”‚   â”‚
â”‚  â”‚     HuggingFace â†’ Vector representation                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                  â”‚
â”‚                                â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. VECTOR SEARCH (pgvector)                               â”‚   â”‚
â”‚  â”‚     Cosine similarity â†’ Top 5 relevant chunks              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                  â”‚
â”‚                                â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. CONTEXT ASSEMBLY                                       â”‚   â”‚
â”‚  â”‚     Query + Retrieved chunks â†’ Prompt construction         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                  â”‚
â”‚                                â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  4. LLM GENERATION (Groq LLaMA 3.3 70B)                    â”‚   â”‚
â”‚  â”‚     Generate answer with source citations                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                  â”‚
â”‚                                â–¼                                  â”‚
â”‚  RESPONSE: "The minimum annual payment is $50,000 as stated    â”‚
â”‚            in Section 4.2 of the agreement." [Citation: p.12]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>
    </div>
</div>

<div class="footer">
    <h3 style="color: white; margin: 0 0 15px;">LicenseIQ System Architecture</h3>
    <p>Version 2.0 | December 2024 | AI-Native Universal Calculation Platform</p>
    <p style="margin-top: 8px;">Confidential & Proprietary</p>
</div>

<script>
    // Tab Navigation
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            tab.classList.add('active');
            document.getElementById(tab.dataset.tab).classList.add('active');
        });
    });

    // Accordion
    function toggleAccordion(header) {
        const content = header.nextElementSibling;
        const isActive = header.classList.contains('active');
        
        // Close all
        document.querySelectorAll('.accordion-header').forEach(h => h.classList.remove('active'));
        document.querySelectorAll('.accordion-content').forEach(c => c.classList.remove('active'));
        
        // Open clicked if was closed
        if (!isActive) {
            header.classList.add('active');
            content.classList.add('active');
        }
    }

    // Open first accordion by default
    document.querySelector('.accordion-header')?.click();
</script>

</body>
</html>

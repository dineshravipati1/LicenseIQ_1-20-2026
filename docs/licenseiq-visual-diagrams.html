<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LicenseIQ Visual Architecture - Colorful Pipeline Diagrams</title>
    <style>
        :root {
            --emerald: #10b981;
            --emerald-light: #6ee7b7;
            --blue: #3b82f6;
            --blue-light: #93c5fd;
            --purple: #8b5cf6;
            --purple-light: #c4b5fd;
            --pink: #ec4899;
            --pink-light: #f9a8d4;
            --orange: #f97316;
            --orange-light: #fdba74;
            --yellow: #eab308;
            --cyan: #06b6d4;
            --red: #ef4444;
            --slate: #0f172a;
            --slate-light: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: white;
        }

        .header {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #312e81 100%);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.85;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 50px 40px;
        }

        .section {
            margin-bottom: 80px;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title::before {
            content: '';
            width: 8px;
            height: 40px;
            background: linear-gradient(180deg, var(--emerald) 0%, var(--blue) 100%);
            border-radius: 4px;
        }

        .diagram-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .diagram-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--emerald-light);
        }

        /* SVG Styling */
        svg {
            width: 100%;
            height: auto;
            display: block;
        }

        .node-box {
            filter: drop-shadow(0 4px 15px rgba(0, 0, 0, 0.3));
        }

        .node-text {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            font-weight: 600;
        }

        .node-subtext {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            font-weight: 400;
            font-size: 11px;
        }

        .arrow-path {
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .glow-effect {
            filter: drop-shadow(0 0 10px currentColor);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 6px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px;
            opacity: 0.6;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .container { padding: 30px 20px; }
            .diagram-card { padding: 20px; }
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-content">
        <h1>LicenseIQ Visual Architecture</h1>
        <p>Colorful Pipeline Diagrams | AI-Native Universal Calculation Platform</p>
    </div>
</div>

<div class="container">

    <!-- SECTION 1: HIGH-LEVEL ARCHITECTURE -->
    <div class="section">
        <h2 class="section-title">Platform Architecture Overview</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">Complete System Architecture</h3>
            <svg viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="emeraldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#10b981"/>
                        <stop offset="100%" style="stop-color:#059669"/>
                    </linearGradient>
                    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6"/>
                        <stop offset="100%" style="stop-color:#2563eb"/>
                    </linearGradient>
                    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8b5cf6"/>
                        <stop offset="100%" style="stop-color:#7c3aed"/>
                    </linearGradient>
                    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f97316"/>
                        <stop offset="100%" style="stop-color:#ea580c"/>
                    </linearGradient>
                    <linearGradient id="pinkGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ec4899"/>
                        <stop offset="100%" style="stop-color:#db2777"/>
                    </linearGradient>
                    <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#06b6d4"/>
                        <stop offset="100%" style="stop-color:#0891b2"/>
                    </linearGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <filter id="shadow">
                        <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.3"/>
                    </filter>
                </defs>

                <!-- Background Grid -->
                <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
                </pattern>
                <rect width="100%" height="100%" fill="url(#grid)"/>

                <!-- CLIENT LAYER -->
                <g class="node-box" filter="url(#shadow)">
                    <rect x="100" y="30" width="1000" height="100" rx="16" fill="url(#emeraldGrad)"/>
                    <text x="600" y="70" text-anchor="middle" fill="white" class="node-text" font-size="18">CLIENT LAYER</text>
                    <text x="600" y="95" text-anchor="middle" fill="rgba(255,255,255,0.8)" class="node-subtext" font-size="13">React + TypeScript + Vite + TailwindCSS + shadcn/ui</text>
                </g>

                <!-- Client Components -->
                <g filter="url(#shadow)">
                    <rect x="120" y="50" width="100" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="170" y="73" text-anchor="middle" fill="white" font-size="11">Dashboard</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="240" y="50" width="100" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="290" y="73" text-anchor="middle" fill="white" font-size="11">Contracts</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="360" y="50" width="100" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="410" y="73" text-anchor="middle" fill="white" font-size="11">Calculator</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="480" y="50" width="100" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="530" y="73" text-anchor="middle" fill="white" font-size="11">ERP Hub</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="600" y="50" width="100" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="650" y="73" text-anchor="middle" fill="white" font-size="11">liQ AI</text>
                </g>

                <!-- Arrow Down -->
                <path d="M 600 130 L 600 170" stroke="url(#emeraldGrad)" stroke-width="4" marker-end="url(#arrowGreen)"/>
                <defs>
                    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#10b981"/>
                    </marker>
                </defs>

                <!-- API LAYER -->
                <g class="node-box" filter="url(#shadow)">
                    <rect x="100" y="180" width="1000" height="100" rx="16" fill="url(#blueGrad)"/>
                    <text x="600" y="220" text-anchor="middle" fill="white" class="node-text" font-size="18">API LAYER</text>
                    <text x="600" y="245" text-anchor="middle" fill="rgba(255,255,255,0.8)" class="node-subtext" font-size="13">Express.js + TypeScript + RESTful API + Passport.js Auth</text>
                </g>

                <!-- API Components -->
                <g filter="url(#shadow)">
                    <rect x="130" y="200" width="90" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="175" y="223" text-anchor="middle" fill="white" font-size="10">Auth Routes</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="240" y="200" width="100" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="290" y="223" text-anchor="middle" fill="white" font-size="10">Contract API</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="360" y="200" width="90" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="405" y="223" text-anchor="middle" fill="white" font-size="10">Calc API</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="470" y="200" width="90" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="515" y="223" text-anchor="middle" fill="white" font-size="10">ERP API</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="580" y="200" width="90" height="35" rx="8" fill="rgba(255,255,255,0.15)"/>
                    <text x="625" y="223" text-anchor="middle" fill="white" font-size="10">AI API</text>
                </g>

                <!-- Arrows Down to 3 sections -->
                <path d="M 300 280 L 300 340" stroke="url(#purpleGrad)" stroke-width="4" marker-end="url(#arrowPurple)"/>
                <path d="M 600 280 L 600 340" stroke="url(#orangeGrad)" stroke-width="4" marker-end="url(#arrowOrange)"/>
                <path d="M 900 280 L 900 340" stroke="url(#pinkGrad)" stroke-width="4" marker-end="url(#arrowPink)"/>
                <defs>
                    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8b5cf6"/>
                    </marker>
                    <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#f97316"/>
                    </marker>
                    <marker id="arrowPink" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#ec4899"/>
                    </marker>
                </defs>

                <!-- DATA LAYER -->
                <g class="node-box" filter="url(#shadow)">
                    <rect x="100" y="350" width="280" height="140" rx="16" fill="url(#purpleGrad)"/>
                    <text x="240" y="390" text-anchor="middle" fill="white" class="node-text" font-size="16">DATA LAYER</text>
                    <rect x="120" y="410" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="175" y="430" text-anchor="middle" fill="white" font-size="11">PostgreSQL</text>
                    <rect x="250" y="410" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="305" y="430" text-anchor="middle" fill="white" font-size="11">pgvector</text>
                    <rect x="120" y="450" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="175" y="470" text-anchor="middle" fill="white" font-size="11">Drizzle ORM</text>
                    <rect x="250" y="450" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="305" y="470" text-anchor="middle" fill="white" font-size="11">Object Storage</text>
                </g>

                <!-- AI LAYER -->
                <g class="node-box" filter="url(#shadow)">
                    <rect x="460" y="350" width="280" height="140" rx="16" fill="url(#orangeGrad)"/>
                    <text x="600" y="390" text-anchor="middle" fill="white" class="node-text" font-size="16">AI/ML LAYER</text>
                    <rect x="480" y="410" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="535" y="430" text-anchor="middle" fill="white" font-size="11">Groq LLaMA</text>
                    <rect x="610" y="410" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="665" y="430" text-anchor="middle" fill="white" font-size="11">HuggingFace</text>
                    <rect x="480" y="450" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="535" y="470" text-anchor="middle" fill="white" font-size="11">OpenAI (Fallback)</text>
                    <rect x="610" y="450" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="665" y="470" text-anchor="middle" fill="white" font-size="11">Embeddings</text>
                </g>

                <!-- EXTERNAL SYSTEMS -->
                <g class="node-box" filter="url(#shadow)">
                    <rect x="820" y="350" width="280" height="140" rx="16" fill="url(#pinkGrad)"/>
                    <text x="960" y="390" text-anchor="middle" fill="white" class="node-text" font-size="16">EXTERNAL SYSTEMS</text>
                    <rect x="840" y="410" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="895" y="430" text-anchor="middle" fill="white" font-size="11">Oracle Fusion</text>
                    <rect x="970" y="410" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="1025" y="430" text-anchor="middle" fill="white" font-size="11">SAP S/4HANA</text>
                    <rect x="840" y="450" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="895" y="470" text-anchor="middle" fill="white" font-size="11">NetSuite</text>
                    <rect x="970" y="450" width="110" height="30" rx="6" fill="rgba(255,255,255,0.2)"/>
                    <text x="1025" y="470" text-anchor="middle" fill="white" font-size="11">Any REST API</text>
                </g>

                <!-- SECURITY LAYER -->
                <g class="node-box" filter="url(#shadow)">
                    <rect x="100" y="540" width="1000" height="80" rx="16" fill="url(#cyanGrad)"/>
                    <text x="600" y="575" text-anchor="middle" fill="white" class="node-text" font-size="16">SECURITY & ACCESS CONTROL</text>
                    <text x="600" y="600" text-anchor="middle" fill="rgba(255,255,255,0.8)" class="node-subtext" font-size="12">5-Tier RBAC | Multi-Tenant Isolation | Session Auth | Audit Logging | Company ‚Üí BU ‚Üí Location Hierarchy</text>
                </g>

                <!-- Connection lines between bottom layers -->
                <path d="M 380 420 C 420 420, 420 420, 460 420" stroke="rgba(255,255,255,0.3)" stroke-width="2" stroke-dasharray="5,5"/>
                <path d="M 740 420 C 780 420, 780 420, 820 420" stroke="rgba(255,255,255,0.3)" stroke-width="2" stroke-dasharray="5,5"/>

                <!-- Vertical arrows to security layer -->
                <path d="M 240 490 L 240 540" stroke="url(#purpleGrad)" stroke-width="3"/>
                <path d="M 600 490 L 600 540" stroke="url(#orangeGrad)" stroke-width="3"/>
                <path d="M 960 490 L 960 540" stroke="url(#pinkGrad)" stroke-width="3"/>
            </svg>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #10b981, #059669)"></div>
                    <span>Frontend/Client</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb)"></div>
                    <span>API/Backend</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed)"></div>
                    <span>Data Storage</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #f97316, #ea580c)"></div>
                    <span>AI/ML Services</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #ec4899, #db2777)"></div>
                    <span>External Systems</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #06b6d4, #0891b2)"></div>
                    <span>Security Layer</span>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION 2: CONTRACT PROCESSING PIPELINE -->
    <div class="section">
        <h2 class="section-title">Contract Processing Pipeline</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">From Upload to AI Analysis</h3>
            <svg viewBox="0 0 1200 400" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="step1Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#10b981"/>
                        <stop offset="100%" style="stop-color:#059669"/>
                    </linearGradient>
                    <linearGradient id="step2Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6"/>
                        <stop offset="100%" style="stop-color:#2563eb"/>
                    </linearGradient>
                    <linearGradient id="step3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8b5cf6"/>
                        <stop offset="100%" style="stop-color:#7c3aed"/>
                    </linearGradient>
                    <linearGradient id="step4Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f97316"/>
                        <stop offset="100%" style="stop-color:#ea580c"/>
                    </linearGradient>
                    <linearGradient id="step5Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ec4899"/>
                        <stop offset="100%" style="stop-color:#db2777"/>
                    </linearGradient>
                    <linearGradient id="step6Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#06b6d4"/>
                        <stop offset="100%" style="stop-color:#0891b2"/>
                    </linearGradient>
                </defs>

                <!-- Background -->
                <rect width="100%" height="100%" fill="transparent"/>

                <!-- Step 1: Upload -->
                <g filter="url(#shadow)">
                    <rect x="40" y="80" width="150" height="180" rx="20" fill="url(#step1Grad)"/>
                    <circle cx="115" cy="140" r="35" fill="rgba(255,255,255,0.2)"/>
                    <text x="115" y="148" text-anchor="middle" fill="white" font-size="28">üìÑ</text>
                    <text x="115" y="200" text-anchor="middle" fill="white" class="node-text" font-size="14">UPLOAD</text>
                    <text x="115" y="220" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">PDF/DOCX</text>
                    <text x="115" y="235" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Multer</text>
                </g>

                <!-- Arrow 1 -->
                <path d="M 190 170 L 230 170" stroke="#10b981" stroke-width="4" fill="none"/>
                <polygon points="225,165 240,170 225,175" fill="#10b981"/>

                <!-- Step 2: Text Extraction -->
                <g filter="url(#shadow)">
                    <rect x="240" y="80" width="150" height="180" rx="20" fill="url(#step2Grad)"/>
                    <circle cx="315" cy="140" r="35" fill="rgba(255,255,255,0.2)"/>
                    <text x="315" y="148" text-anchor="middle" fill="white" font-size="28">üìù</text>
                    <text x="315" y="200" text-anchor="middle" fill="white" class="node-text" font-size="14">EXTRACT</text>
                    <text x="315" y="220" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">PDF Parse</text>
                    <text x="315" y="235" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Text Chunking</text>
                </g>

                <!-- Arrow 2 -->
                <path d="M 390 170 L 430 170" stroke="#3b82f6" stroke-width="4" fill="none"/>
                <polygon points="425,165 440,170 425,175" fill="#3b82f6"/>

                <!-- Step 3: AI Analysis -->
                <g filter="url(#shadow)">
                    <rect x="440" y="80" width="150" height="180" rx="20" fill="url(#step3Grad)"/>
                    <circle cx="515" cy="140" r="35" fill="rgba(255,255,255,0.2)"/>
                    <text x="515" y="148" text-anchor="middle" fill="white" font-size="28">üß†</text>
                    <text x="515" y="200" text-anchor="middle" fill="white" class="node-text" font-size="14">AI ANALYSIS</text>
                    <text x="515" y="220" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">LLaMA 3.3 70B</text>
                    <text x="515" y="235" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Groq API</text>
                </g>

                <!-- Arrow 3 -->
                <path d="M 590 170 L 630 170" stroke="#8b5cf6" stroke-width="4" fill="none"/>
                <polygon points="625,165 640,170 625,175" fill="#8b5cf6"/>

                <!-- Step 4: Structured Output -->
                <g filter="url(#shadow)">
                    <rect x="640" y="80" width="150" height="180" rx="20" fill="url(#step4Grad)"/>
                    <circle cx="715" cy="140" r="35" fill="rgba(255,255,255,0.2)"/>
                    <text x="715" y="148" text-anchor="middle" fill="white" font-size="28">üìä</text>
                    <text x="715" y="200" text-anchor="middle" fill="white" class="node-text" font-size="14">STRUCTURE</text>
                    <text x="715" y="220" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">JSON Output</text>
                    <text x="715" y="235" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Entities/Terms</text>
                </g>

                <!-- Arrow 4 -->
                <path d="M 790 170 L 830 170" stroke="#f97316" stroke-width="4" fill="none"/>
                <polygon points="825,165 840,170 825,175" fill="#f97316"/>

                <!-- Step 5: Embeddings -->
                <g filter="url(#shadow)">
                    <rect x="840" y="80" width="150" height="180" rx="20" fill="url(#step5Grad)"/>
                    <circle cx="915" cy="140" r="35" fill="rgba(255,255,255,0.2)"/>
                    <text x="915" y="148" text-anchor="middle" fill="white" font-size="28">üî¢</text>
                    <text x="915" y="200" text-anchor="middle" fill="white" class="node-text" font-size="14">EMBED</text>
                    <text x="915" y="220" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">HuggingFace</text>
                    <text x="915" y="235" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">pgvector</text>
                </g>

                <!-- Arrow 5 -->
                <path d="M 990 170 L 1030 170" stroke="#ec4899" stroke-width="4" fill="none"/>
                <polygon points="1025,165 1040,170 1025,175" fill="#ec4899"/>

                <!-- Step 6: Ready -->
                <g filter="url(#shadow)">
                    <rect x="1040" y="80" width="130" height="180" rx="20" fill="url(#step6Grad)"/>
                    <circle cx="1105" cy="140" r="35" fill="rgba(255,255,255,0.2)"/>
                    <text x="1105" y="148" text-anchor="middle" fill="white" font-size="28">‚úÖ</text>
                    <text x="1105" y="200" text-anchor="middle" fill="white" class="node-text" font-size="14">READY</text>
                    <text x="1105" y="220" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Q&A Enabled</text>
                    <text x="1105" y="235" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Calculate Ready</text>
                </g>

                <!-- Progress Bar -->
                <rect x="40" y="320" width="1130" height="12" rx="6" fill="rgba(255,255,255,0.1)"/>
                <rect x="40" y="320" width="1130" height="12" rx="6" fill="url(#emeraldGrad)"/>
                
                <!-- Step Labels -->
                <text x="115" y="360" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">Step 1</text>
                <text x="315" y="360" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">Step 2</text>
                <text x="515" y="360" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">Step 3</text>
                <text x="715" y="360" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">Step 4</text>
                <text x="915" y="360" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">Step 5</text>
                <text x="1105" y="360" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">Complete</text>
            </svg>
        </div>
    </div>

    <!-- SECTION 3: liQ AI RAG PIPELINE -->
    <div class="section">
        <h2 class="section-title">liQ AI - RAG Query Pipeline</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">Retrieval-Augmented Generation Flow</h3>
            <svg viewBox="0 0 1200 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Center Circle - Query -->
                <g filter="url(#shadow)">
                    <circle cx="600" cy="100" r="60" fill="url(#emeraldGrad)"/>
                    <text x="600" y="95" text-anchor="middle" fill="white" font-size="24">üí¨</text>
                    <text x="600" y="120" text-anchor="middle" fill="white" class="node-text" font-size="12">USER QUERY</text>
                </g>

                <!-- Arrow down -->
                <path d="M 600 160 L 600 200" stroke="#10b981" stroke-width="4"/>
                <polygon points="595,195 600,210 605,195" fill="#10b981"/>

                <!-- Step 1: Query Embedding -->
                <g filter="url(#shadow)">
                    <rect x="450" y="220" width="300" height="80" rx="16" fill="url(#blueGrad)"/>
                    <text x="520" y="265" text-anchor="middle" fill="white" font-size="22">üî¢</text>
                    <text x="600" y="255" text-anchor="middle" fill="white" class="node-text" font-size="14">1. Query Embedding</text>
                    <text x="600" y="280" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">HuggingFace sentence-transformers</text>
                </g>

                <!-- Split arrows -->
                <path d="M 500 300 L 300 350" stroke="#3b82f6" stroke-width="3"/>
                <path d="M 700 300 L 900 350" stroke="#3b82f6" stroke-width="3"/>

                <!-- Step 2a: Vector Search -->
                <g filter="url(#shadow)">
                    <rect x="150" y="350" width="300" height="80" rx="16" fill="url(#purpleGrad)"/>
                    <text x="220" y="395" text-anchor="middle" fill="white" font-size="22">üîç</text>
                    <text x="300" y="385" text-anchor="middle" fill="white" class="node-text" font-size="14">2. Vector Search</text>
                    <text x="300" y="410" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">pgvector cosine similarity</text>
                </g>

                <!-- Step 2b: Contract Context -->
                <g filter="url(#shadow)">
                    <rect x="750" y="350" width="300" height="80" rx="16" fill="url(#orangeGrad)"/>
                    <text x="820" y="395" text-anchor="middle" fill="white" font-size="22">üìÑ</text>
                    <text x="900" y="385" text-anchor="middle" fill="white" class="node-text" font-size="14">Contract Context</text>
                    <text x="900" y="410" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Top 5 relevant chunks</text>
                </g>

                <!-- Merge arrows -->
                <path d="M 300 430 L 500 470" stroke="#8b5cf6" stroke-width="3"/>
                <path d="M 900 430 L 700 470" stroke="#f97316" stroke-width="3"/>

                <!-- Step 3: LLM Generation -->
                <g filter="url(#shadow)">
                    <rect x="400" y="460" width="400" height="100" rx="20" fill="url(#pinkGrad)"/>
                    <text x="480" y="515" text-anchor="middle" fill="white" font-size="28">üß†</text>
                    <text x="600" y="500" text-anchor="middle" fill="white" class="node-text" font-size="16">3. LLM Generation</text>
                    <text x="600" y="525" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="12">Groq LLaMA 3.3 70B</text>
                    <text x="600" y="545" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Answer + Source Citations</text>
                </g>

                <!-- Decorative elements -->
                <circle cx="100" cy="100" r="30" fill="rgba(16, 185, 129, 0.2)" />
                <circle cx="1100" cy="100" r="40" fill="rgba(139, 92, 246, 0.15)" />
                <circle cx="150" cy="250" r="25" fill="rgba(59, 130, 246, 0.2)" />
                <circle cx="1050" cy="280" r="35" fill="rgba(236, 72, 153, 0.15)" />
            </svg>
        </div>
    </div>

    <!-- SECTION 4: ERP INTEGRATION PIPELINE -->
    <div class="section">
        <h2 class="section-title">ERP Integration Pipeline</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">Universal ERP Connector Flow</h3>
            <svg viewBox="0 0 1200 550" xmlns="http://www.w3.org/2000/svg">
                <!-- ERP Sources (Left) -->
                <g filter="url(#shadow)">
                    <rect x="40" y="50" width="180" height="60" rx="12" fill="url(#pinkGrad)"/>
                    <text x="130" y="85" text-anchor="middle" fill="white" class="node-text" font-size="13">Oracle Fusion</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="130" width="180" height="60" rx="12" fill="url(#blueGrad)"/>
                    <text x="130" y="165" text-anchor="middle" fill="white" class="node-text" font-size="13">SAP S/4HANA</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="210" width="180" height="60" rx="12" fill="url(#orangeGrad)"/>
                    <text x="130" y="245" text-anchor="middle" fill="white" class="node-text" font-size="13">NetSuite</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="290" width="180" height="60" rx="12" fill="url(#purpleGrad)"/>
                    <text x="130" y="325" text-anchor="middle" fill="white" class="node-text" font-size="13">Dynamics 365</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="370" width="180" height="60" rx="12" fill="url(#cyanGrad)"/>
                    <text x="130" y="405" text-anchor="middle" fill="white" class="node-text" font-size="13">Any REST API</text>
                </g>

                <!-- Arrows from ERPs to Hub -->
                <path d="M 220 80 C 280 80, 280 220, 340 220" stroke="#ec4899" stroke-width="3" fill="none"/>
                <path d="M 220 160 C 280 160, 280 220, 340 220" stroke="#3b82f6" stroke-width="3" fill="none"/>
                <path d="M 220 240 L 340 240" stroke="#f97316" stroke-width="3" fill="none"/>
                <path d="M 220 320 C 280 320, 280 260, 340 260" stroke="#8b5cf6" stroke-width="3" fill="none"/>
                <path d="M 220 400 C 280 400, 280 280, 340 280" stroke="#06b6d4" stroke-width="3" fill="none"/>

                <!-- Integration Hub (Center) -->
                <g filter="url(#shadow)">
                    <rect x="340" y="100" width="200" height="280" rx="20" fill="url(#emeraldGrad)"/>
                    <text x="440" y="150" text-anchor="middle" fill="white" class="node-text" font-size="16">INTEGRATION</text>
                    <text x="440" y="175" text-anchor="middle" fill="white" class="node-text" font-size="16">HUB</text>
                    
                    <!-- Sub-components -->
                    <rect x="360" y="200" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="440" y="223" text-anchor="middle" fill="white" font-size="11">OAuth2 / API Key</text>
                    
                    <rect x="360" y="250" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="440" y="273" text-anchor="middle" fill="white" font-size="11">Pre-Import Filters</text>
                    
                    <rect x="360" y="300" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="440" y="323" text-anchor="middle" fill="white" font-size="11">Version Control</text>
                </g>

                <!-- Arrow to AI Mapping -->
                <path d="M 540 240 L 600 240" stroke="#10b981" stroke-width="4"/>
                <polygon points="595,235 610,240 595,245" fill="#10b981"/>

                <!-- AI Field Mapping -->
                <g filter="url(#shadow)">
                    <rect x="610" y="100" width="200" height="280" rx="20" fill="url(#orangeGrad)"/>
                    <text x="710" y="145" text-anchor="middle" fill="white" class="node-text" font-size="16">AI FIELD</text>
                    <text x="710" y="170" text-anchor="middle" fill="white" class="node-text" font-size="16">MAPPING</text>
                    
                    <circle cx="710" cy="220" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="710" y="228" text-anchor="middle" fill="white" font-size="24">üß†</text>
                    
                    <rect x="630" y="270" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="710" y="293" text-anchor="middle" fill="white" font-size="11">LLaMA Matching</text>
                    
                    <rect x="630" y="320" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="710" y="343" text-anchor="middle" fill="white" font-size="11">Confidence Scores</text>
                </g>

                <!-- Arrow to LicenseIQ -->
                <path d="M 810 240 L 870 240" stroke="#f97316" stroke-width="4"/>
                <polygon points="865,235 880,240 865,245" fill="#f97316"/>

                <!-- LicenseIQ Schema -->
                <g filter="url(#shadow)">
                    <rect x="880" y="100" width="200" height="280" rx="20" fill="url(#purpleGrad)"/>
                    <text x="980" y="145" text-anchor="middle" fill="white" class="node-text" font-size="16">LICENSEIQ</text>
                    <text x="980" y="170" text-anchor="middle" fill="white" class="node-text" font-size="16">SCHEMA</text>
                    
                    <rect x="900" y="200" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="980" y="223" text-anchor="middle" fill="white" font-size="11">Customers</text>
                    
                    <rect x="900" y="250" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="980" y="273" text-anchor="middle" fill="white" font-size="11">Products</text>
                    
                    <rect x="900" y="300" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="980" y="323" text-anchor="middle" fill="white" font-size="11">Transactions</text>
                    
                    <rect x="900" y="350" width="160" height="35" rx="8" fill="rgba(255,255,255,0.2)"/>
                    <text x="980" y="373" text-anchor="middle" fill="white" font-size="11">Territories</text>
                </g>

                <!-- Bottom flow: Import Job -->
                <g filter="url(#shadow)">
                    <rect x="340" y="450" width="740" height="70" rx="16" fill="url(#cyanGrad)"/>
                    <text x="710" y="485" text-anchor="middle" fill="white" class="node-text" font-size="14">IMPORT JOB EXECUTION</text>
                    <text x="710" y="505" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Dry-Run Preview ‚Üí Approval Workflow ‚Üí Production Import ‚Üí Audit Log</text>
                </g>

                <!-- Arrows down to import job -->
                <path d="M 440 380 L 440 450" stroke="#10b981" stroke-width="3"/>
                <path d="M 710 380 L 710 450" stroke="#f97316" stroke-width="3"/>
                <path d="M 980 380 L 980 450" stroke="#8b5cf6" stroke-width="3"/>
            </svg>
        </div>
    </div>

    <!-- SECTION 5: PAYMENT CALCULATION PIPELINE -->
    <div class="section">
        <h2 class="section-title">Payment Calculation Pipeline</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">Sales to Invoice Generation</h3>
            <svg viewBox="0 0 1200 350" xmlns="http://www.w3.org/2000/svg">
                <!-- Step 1: Sales Data -->
                <g filter="url(#shadow)">
                    <rect x="40" y="100" width="160" height="150" rx="20" fill="url(#emeraldGrad)"/>
                    <circle cx="120" cy="155" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="120" y="163" text-anchor="middle" fill="white" font-size="24">üìä</text>
                    <text x="120" y="210" text-anchor="middle" fill="white" class="node-text" font-size="13">SALES DATA</text>
                    <text x="120" y="230" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">CSV / ERP Import</text>
                </g>

                <!-- Arrow -->
                <path d="M 200 175 L 250 175" stroke="#10b981" stroke-width="4"/>
                <polygon points="245,170 260,175 245,180" fill="#10b981"/>

                <!-- Step 2: Contract Match -->
                <g filter="url(#shadow)">
                    <rect x="260" y="100" width="160" height="150" rx="20" fill="url(#blueGrad)"/>
                    <circle cx="340" cy="155" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="340" y="163" text-anchor="middle" fill="white" font-size="24">üîó</text>
                    <text x="340" y="210" text-anchor="middle" fill="white" class="node-text" font-size="13">MATCH</text>
                    <text x="340" y="230" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Contract Linking</text>
                </g>

                <!-- Arrow -->
                <path d="M 420 175 L 470 175" stroke="#3b82f6" stroke-width="4"/>
                <polygon points="465,170 480,175 465,180" fill="#3b82f6"/>

                <!-- Step 3: Apply Rules -->
                <g filter="url(#shadow)">
                    <rect x="480" y="100" width="160" height="150" rx="20" fill="url(#purpleGrad)"/>
                    <circle cx="560" cy="155" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="560" y="163" text-anchor="middle" fill="white" font-size="24">üìê</text>
                    <text x="560" y="210" text-anchor="middle" fill="white" class="node-text" font-size="13">APPLY RULES</text>
                    <text x="560" y="230" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">FormulaNode JSON</text>
                </g>

                <!-- Arrow -->
                <path d="M 640 175 L 690 175" stroke="#8b5cf6" stroke-width="4"/>
                <polygon points="685,170 700,175 685,180" fill="#8b5cf6"/>

                <!-- Step 4: Calculate -->
                <g filter="url(#shadow)">
                    <rect x="700" y="100" width="160" height="150" rx="20" fill="url(#orangeGrad)"/>
                    <circle cx="780" cy="155" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="780" y="163" text-anchor="middle" fill="white" font-size="24">üßÆ</text>
                    <text x="780" y="210" text-anchor="middle" fill="white" class="node-text" font-size="13">CALCULATE</text>
                    <text x="780" y="230" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">License Fees</text>
                </g>

                <!-- Arrow -->
                <path d="M 860 175 L 910 175" stroke="#f97316" stroke-width="4"/>
                <polygon points="905,170 920,175 905,180" fill="#f97316"/>

                <!-- Step 5: Generate Invoice -->
                <g filter="url(#shadow)">
                    <rect x="920" y="100" width="160" height="150" rx="20" fill="url(#pinkGrad)"/>
                    <circle cx="1000" cy="155" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="1000" y="163" text-anchor="middle" fill="white" font-size="24">üìÑ</text>
                    <text x="1000" y="210" text-anchor="middle" fill="white" class="node-text" font-size="13">INVOICE</text>
                    <text x="1000" y="230" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">PDF Generation</text>
                </g>

                <!-- ERP Sync Arrow -->
                <path d="M 1000 250 L 1000 290 L 1100 290" stroke="#ec4899" stroke-width="3"/>
                <polygon points="1095,285 1110,290 1095,295" fill="#ec4899"/>

                <!-- ERP Sync Box -->
                <g filter="url(#shadow)">
                    <rect x="1110" y="265" width="70" height="50" rx="10" fill="url(#cyanGrad)"/>
                    <text x="1145" y="295" text-anchor="middle" fill="white" font-size="10">ERP Sync</text>
                </g>

                <!-- Bottom: Run History -->
                <g filter="url(#shadow)">
                    <rect x="260" y="300" width="600" height="40" rx="10" fill="rgba(255,255,255,0.1)"/>
                    <text x="560" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="12">üìã Calculation Run History & Audit Trail</text>
                </g>
            </svg>
        </div>
    </div>

    <!-- SECTION 6: MULTI-TENANT HIERARCHY -->
    <div class="section">
        <h2 class="section-title">Multi-Tenant Hierarchy</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">3-Level Organizational Structure</h3>
            <svg viewBox="0 0 1200 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Level 1: Company -->
                <g filter="url(#shadow)">
                    <rect x="450" y="30" width="300" height="80" rx="20" fill="url(#emeraldGrad)"/>
                    <text x="600" y="65" text-anchor="middle" fill="white" class="node-text" font-size="18">üè¢ COMPANY</text>
                    <text x="600" y="90" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="12">Acme Corporation</text>
                </g>

                <!-- Connector lines from Company to BUs -->
                <path d="M 450 110 L 200 160" stroke="#10b981" stroke-width="3"/>
                <path d="M 600 110 L 600 160" stroke="#10b981" stroke-width="3"/>
                <path d="M 750 110 L 1000 160" stroke="#10b981" stroke-width="3"/>

                <!-- Level 2: Business Units -->
                <g filter="url(#shadow)">
                    <rect x="50" y="160" width="250" height="70" rx="16" fill="url(#blueGrad)"/>
                    <text x="175" y="195" text-anchor="middle" fill="white" class="node-text" font-size="14">üìÅ BU: North America</text>
                    <text x="175" y="215" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Company Admin Access</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="475" y="160" width="250" height="70" rx="16" fill="url(#blueGrad)"/>
                    <text x="600" y="195" text-anchor="middle" fill="white" class="node-text" font-size="14">üìÅ BU: Europe</text>
                    <text x="600" y="215" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Company Admin Access</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="900" y="160" width="250" height="70" rx="16" fill="url(#blueGrad)"/>
                    <text x="1025" y="195" text-anchor="middle" fill="white" class="node-text" font-size="14">üìÅ BU: Asia-Pacific</text>
                    <text x="1025" y="215" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Company Admin Access</text>
                </g>

                <!-- Connector lines from BUs to Locations -->
                <path d="M 100 230 L 100 280" stroke="#3b82f6" stroke-width="2"/>
                <path d="M 175 230 L 175 280" stroke="#3b82f6" stroke-width="2"/>
                <path d="M 250 230 L 250 280" stroke="#3b82f6" stroke-width="2"/>
                
                <path d="M 525 230 L 525 280" stroke="#3b82f6" stroke-width="2"/>
                <path d="M 600 230 L 600 280" stroke="#3b82f6" stroke-width="2"/>
                <path d="M 675 230 L 675 280" stroke="#3b82f6" stroke-width="2"/>
                
                <path d="M 950 230 L 950 280" stroke="#3b82f6" stroke-width="2"/>
                <path d="M 1025 230 L 1025 280" stroke="#3b82f6" stroke-width="2"/>
                <path d="M 1100 230 L 1100 280" stroke="#3b82f6" stroke-width="2"/>

                <!-- Level 3: Locations (North America) -->
                <g filter="url(#shadow)">
                    <rect x="50" y="280" width="70" height="60" rx="12" fill="url(#purpleGrad)"/>
                    <text x="85" y="315" text-anchor="middle" fill="white" font-size="11">NYC</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="140" y="280" width="70" height="60" rx="12" fill="url(#purpleGrad)"/>
                    <text x="175" y="315" text-anchor="middle" fill="white" font-size="11">LA</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="230" y="280" width="70" height="60" rx="12" fill="url(#purpleGrad)"/>
                    <text x="265" y="315" text-anchor="middle" fill="white" font-size="11">Chicago</text>
                </g>

                <!-- Level 3: Locations (Europe) -->
                <g filter="url(#shadow)">
                    <rect x="475" y="280" width="70" height="60" rx="12" fill="url(#orangeGrad)"/>
                    <text x="510" y="315" text-anchor="middle" fill="white" font-size="11">London</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="565" y="280" width="70" height="60" rx="12" fill="url(#orangeGrad)"/>
                    <text x="600" y="315" text-anchor="middle" fill="white" font-size="11">Paris</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="655" y="280" width="70" height="60" rx="12" fill="url(#orangeGrad)"/>
                    <text x="690" y="315" text-anchor="middle" fill="white" font-size="11">Berlin</text>
                </g>

                <!-- Level 3: Locations (APAC) -->
                <g filter="url(#shadow)">
                    <rect x="900" y="280" width="70" height="60" rx="12" fill="url(#pinkGrad)"/>
                    <text x="935" y="315" text-anchor="middle" fill="white" font-size="11">Tokyo</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="990" y="280" width="70" height="60" rx="12" fill="url(#pinkGrad)"/>
                    <text x="1025" y="315" text-anchor="middle" fill="white" font-size="11">Sydney</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="1080" y="280" width="70" height="60" rx="12" fill="url(#pinkGrad)"/>
                    <text x="1115" y="315" text-anchor="middle" fill="white" font-size="11">Singapore</text>
                </g>

                <!-- Data Isolation Box -->
                <g filter="url(#shadow)">
                    <rect x="100" y="380" width="1000" height="100" rx="16" fill="url(#cyanGrad)"/>
                    <text x="600" y="415" text-anchor="middle" fill="white" class="node-text" font-size="16">üîí DATA ISOLATION</text>
                    <text x="600" y="445" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="12">Users see ONLY data from their assigned Company / Business Unit / Location</text>
                    <text x="600" y="465" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="11">All queries automatically filtered by organizational context | Admin bypass with audit trail</text>
                </g>
            </svg>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #10b981, #059669)"></div>
                    <span>Level 1: Company</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb)"></div>
                    <span>Level 2: Business Unit</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed)"></div>
                    <span>Level 3: Location</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #06b6d4, #0891b2)"></div>
                    <span>Security Layer</span>
                </div>
            </div>
        </div>
    </div>

    <!-- SECTION 7: RBAC ROLES -->
    <div class="section">
        <h2 class="section-title">5-Tier RBAC System</h2>
        
        <div class="diagram-card">
            <h3 class="diagram-title">Role-Based Access Control</h3>
            <svg viewBox="0 0 1200 300" xmlns="http://www.w3.org/2000/svg">
                <!-- Role 1: System Admin -->
                <g filter="url(#shadow)">
                    <rect x="40" y="80" width="200" height="140" rx="20" fill="url(#pinkGrad)"/>
                    <circle cx="140" cy="130" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="140" y="138" text-anchor="middle" fill="white" font-size="22">üëë</text>
                    <text x="140" y="175" text-anchor="middle" fill="white" class="node-text" font-size="13">SYSTEM ADMIN</text>
                    <text x="140" y="195" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">All Companies</text>
                    <text x="140" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Super User</text>
                </g>

                <!-- Role 2: Company Admin -->
                <g filter="url(#shadow)">
                    <rect x="280" y="80" width="200" height="140" rx="20" fill="url(#orangeGrad)"/>
                    <circle cx="380" cy="130" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="380" y="138" text-anchor="middle" fill="white" font-size="22">üè¢</text>
                    <text x="380" y="175" text-anchor="middle" fill="white" class="node-text" font-size="13">COMPANY ADMIN</text>
                    <text x="380" y="195" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Own Company</text>
                    <text x="380" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">User Management</text>
                </g>

                <!-- Role 3: Manager -->
                <g filter="url(#shadow)">
                    <rect x="520" y="80" width="200" height="140" rx="20" fill="url(#purpleGrad)"/>
                    <circle cx="620" cy="130" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="620" y="138" text-anchor="middle" fill="white" font-size="22">üëî</text>
                    <text x="620" y="175" text-anchor="middle" fill="white" class="node-text" font-size="13">MANAGER</text>
                    <text x="620" y="195" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">BU/Location Scope</text>
                    <text x="620" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Create/Edit Data</text>
                </g>

                <!-- Role 4: Analyst -->
                <g filter="url(#shadow)">
                    <rect x="760" y="80" width="200" height="140" rx="20" fill="url(#blueGrad)"/>
                    <circle cx="860" cy="130" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="860" y="138" text-anchor="middle" fill="white" font-size="22">üìä</text>
                    <text x="860" y="175" text-anchor="middle" fill="white" class="node-text" font-size="13">ANALYST</text>
                    <text x="860" y="195" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">View & Analyze</text>
                    <text x="860" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Run Calculations</text>
                </g>

                <!-- Role 5: Viewer -->
                <g filter="url(#shadow)">
                    <rect x="1000" y="80" width="160" height="140" rx="20" fill="url(#emeraldGrad)"/>
                    <circle cx="1080" cy="130" r="30" fill="rgba(255,255,255,0.2)"/>
                    <text x="1080" y="138" text-anchor="middle" fill="white" font-size="22">üëÅÔ∏è</text>
                    <text x="1080" y="175" text-anchor="middle" fill="white" class="node-text" font-size="13">VIEWER</text>
                    <text x="1080" y="195" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Read Only</text>
                    <text x="1080" y="210" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Assigned Scope</text>
                </g>

                <!-- Arrows indicating permission hierarchy -->
                <path d="M 240 150 L 270 150" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                <path d="M 480 150 L 510 150" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                <path d="M 720 150 L 750 150" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
                <path d="M 960 150 L 990 150" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>

                <!-- Permission indicator -->
                <text x="600" y="270" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="12">‚Üê Higher Permissions                                                           Lower Permissions ‚Üí</text>
            </svg>
        </div>
    </div>

</div>

<div class="footer">
    <p>LicenseIQ Visual Architecture | Version 2.0 | December 2024</p>
    <p>AI-Native Universal Calculation Platform</p>
</div>

</body>
</html>
